<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计算机网络原理笔记 | RainyDoor</title><meta name="author" content="RainyDoor,3391182076@qq.com"><meta name="copyright" content="RainyDoor"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="第一章 概述 1.1 因特网概述 因特网组成：  边缘部分：由所有连接在因特网上的主机组成。这部分是用户直接使用的，用来通信和资源共享。 核心部分：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的。  1.2 三种交换方式 一、电路交换  电路交换：电话交换机接通电话线的方式称为电路交换。 从通信资源的分配角度来看，交换就是按照某种方式动态地分配传输线路的资源 电路交换的三个步骤">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络原理笔记">
<meta property="og:url" content="https://rainydoor.github.io/655c1d54.html">
<meta property="og:site_name" content="RainyDoor">
<meta property="og:description" content="第一章 概述 1.1 因特网概述 因特网组成：  边缘部分：由所有连接在因特网上的主机组成。这部分是用户直接使用的，用来通信和资源共享。 核心部分：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的。  1.2 三种交换方式 一、电路交换  电路交换：电话交换机接通电话线的方式称为电路交换。 从通信资源的分配角度来看，交换就是按照某种方式动态地分配传输线路的资源 电路交换的三个步骤">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://rainydoor.github.io/img/109310857_p0.png">
<meta property="article:published_time" content="2024-04-04T08:58:10.000Z">
<meta property="article:modified_time" content="2024-07-06T13:07:20.322Z">
<meta property="article:author" content="RainyDoor">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://rainydoor.github.io/img/109310857_p0.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://rainydoor.github.io/655c1d54.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: RainyDoor","link":"链接: ","source":"来源: RainyDoor","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络原理笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-07-06 21:07:20'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.1.1"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/109310857_p0.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/114784301_p0.png')"><nav id="nav"><span id="blog-info"><a href="/" title="RainyDoor"><span class="site-name">RainyDoor</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计算机网络原理笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-04-04T08:58:10.000Z" title="发表于 2024-04-04 16:58:10">2024-04-04</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-07-06T13:07:20.322Z" title="更新于 2024-07-06 21:07:20">2024-07-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/">计算机网络原理</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">31.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>99分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计算机网络原理笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="第一章-概述">第一章 概述</h1>
<h2 id="1-1-因特网概述">1.1 因特网概述</h2>
<p>因特网组成：</p>
<ul>
<li>边缘部分：由所有连接在因特网上的<strong>主机</strong>组成。这部分是<strong>用户直接使用</strong>的，用来<strong>通信</strong>和<strong>资源共享</strong>。</li>
<li>核心部分：由<strong>大量网络</strong>和连接这些网络的<strong>路由器</strong>组成。这部分是<strong>为边缘部分提供服务</strong>的。</li>
</ul>
<h2 id="1-2-三种交换方式">1.2 三种交换方式</h2>
<h3 id="一-电路交换">一、电路交换</h3>
<ol>
<li>电路交换：电话交换机接通电话线的方式称为电路交换。</li>
<li>从通信资源的分配角度来看，交换就是按照某种方式动态地分配传输线路的资源</li>
<li>电路交换的三个步骤：
<ul>
<li>建立连接（分配通信资源）</li>
<li>通话（一直占用通信资源）</li>
<li>释放连接（归还通信资源）</li>
</ul>
</li>
</ol>
<h3 id="二-分组交换">二、分组交换</h3>
<ol>
<li>发送方：构造分组，发送分组</li>
<li>路由器：缓存分组，转发分组</li>
<li>接收方：接收分组，还原报文</li>
</ol>
<h3 id="三-报文交换">三、报文交换</h3>
<p>目前较少使用，被较先进的分组交换所取代。</p>
<h3 id="四-总结">四、总结</h3>
<table border="1">
    <thead align="center">
    	<tr>
        	<td></td>
            <td>优点</td>
            <td>缺点</td>
        </tr>
    </thead>
    <tbody>
    	<tr>
        	<td align="center">电路交换</td>
            <td>1）通信时延小<br />2）有序传输<br />3）没有冲突<br />4）使用范围广<br />5）实时性强<br />6）控制简单</td>
            <td>1）建立连接时间长<br />2）线路独占，使用效率低<br />3）灵活性差<br />4）难以规格化</td>
        </tr>
        <tr>
        	<td align="center">报文交换</td>
            <td>1）无需建立连接<br />2）动态分配线路<br />3）提高线路可靠性<br />4）提高线路利用率<br />5）提高多目标服务</td>
            <td>1）引起了转发时延<br />2）需要较大存储缓存空间<br />3）需要传输额外的信息量</td>
        </tr>
        <tr>
        	<td align="center">分组交换</td>
            <td>1）无需建立连接<br />2）线路利用率高<br />3）简化了存储管理<br />4）加速传输<br />5）减少出错概率和重发数据量</td>
            <td>1）引起了转发时延<br />2）需要传输额外的信息量<br />3）对于数据报服务，存在失序、丢失或重复分组的问题；对于虚电路服务，存在呼叫建立、数据传输和虚电路释放三个过程</td>
    	</tr>
	</tbody>
</table>
<h2 id="1-3-计算机网络的性能指标">1.3 计算机网络的性能指标</h2>
<ul>
<li>
<p>速率</p>
<ol>
<li>
<p>比特：计算机中<strong>数据量的单位</strong>，也是信息论中信息量的单位。一个比特就是二进制数字的一个 1 或 0.</p>
</li>
<li>
<p>常用数据量单位</p>
</li>
</ol>
</li>
</ul>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8</mn><mi>b</mi><mi>i</mi><mi>t</mi><mo>=</mo><mn>1</mn><mi>B</mi><mi>y</mi><mi>t</mi><mi>e</mi><mspace linebreak="newline"></mspace><mi>K</mi><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>10</mn></msup><mi>B</mi><mspace linebreak="newline"></mspace><mi>M</mi><mi>B</mi><mo>=</mo><mi>K</mi><mo>⋅</mo><mi>K</mi><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>10</mn></msup><mo>⋅</mo><msup><mn>2</mn><mn>10</mn></msup><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>20</mn></msup><mi>B</mi><mspace linebreak="newline"></mspace><mi>G</mi><mi>B</mi><mo>=</mo><mi>K</mi><mo>⋅</mo><mi>M</mi><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>10</mn></msup><mo>⋅</mo><msup><mn>2</mn><mn>20</mn></msup><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>30</mn></msup><mi>B</mi><mspace linebreak="newline"></mspace><mi>T</mi><mi>B</mi><mo>=</mo><mi>K</mi><mo>⋅</mo><mi>G</mi><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>10</mn></msup><mo>⋅</mo><msup><mn>2</mn><mn>30</mn></msup><mi>B</mi><mo>=</mo><msup><mn>2</mn><mn>40</mn></msup><mi>B</mi></mrow><annotation encoding="application/x-tex">  8bit=1Byte \\ KB=2^{10}B \\ MB=K \cdot KB=2^{10} \cdot 2^{10}B=2^{20}B \\ GB=K \cdot MB=2^{10} \cdot 2^{20}B=2^{30}B \\ TB=K \cdot GB=2^{10}\cdot 2^{30}B=2^{40}B
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></span></p>
<ol start="3">
<li>
<p>速率：连接在计算机网络上的主机在数字信道上传送比特的速率，也称为<strong>比特率</strong>或<strong>数据率</strong>。</p>
</li>
<li>
<p>常用数据率单位</p>
</li>
</ol>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi>i</mi><mi>t</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">(</mo><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo separator="true">,</mo><mi>b</mi><mi>p</mi><mi>s</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>k</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">(</mo><mi>b</mi><mi>p</mi><mi>s</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>M</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mi>k</mi><mo>⋅</mo><mi>k</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">(</mo><mi>b</mi><mi>p</mi><mi>s</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>G</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mi>k</mi><mo>⋅</mo><mi>M</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>6</mn></msup><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">(</mo><mi>b</mi><mi>p</mi><mi>s</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>T</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mi>k</mi><mo>⋅</mo><mi>G</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo>=</mo><mn>1</mn><msup><mn>0</mn><mn>12</mn></msup><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">(</mo><mi>b</mi><mi>p</mi><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">  bit/s(b/s,bps) \\ kb/s=10^3b/s(bps) \\ Mb/s=k \cdot kb/s=10^3\cdot 10^3b/s=10^6b/s(bps) \\ Gb/s=k\cdot Mb/s=10^3\cdot10^6b/s=10^9b/s(bps) \\ Tb/s=k\cdot Gb/s=10^3\cdot10^9b/s=10^{12}b/s(bps)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">p</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span></span></span></p>
<ul>
<li>
<p>带宽</p>
<ol>
<li>
<p>带宽在模拟信号系统中的意义</p>
<ul>
<li><strong>信号</strong>所包含的各种不同频率成分所占据的<strong>频率范围</strong>；</li>
<li>单位：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi><mi>z</mi><mo stretchy="false">(</mo><mi>k</mi><mi>H</mi><mi>z</mi><mo separator="true">,</mo><mi>M</mi><mi>H</mi><mi>z</mi><mo separator="true">,</mo><mi>G</mi><mi>H</mi><mi>z</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Hz(kHz,MHz,GHz)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.08125em;">H</span><span class="mord mathdefault" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span></span></span></li>
</ul>
</li>
<li>
<p>带宽在计算机网络中的意义</p>
<ul>
<li>
<p>用来表示网络的<strong>通信线路</strong>所能传送数据的能力，因此网络带宽表示在单位时间内从网络中的某一点到另一点所能通过的“<strong>最高数据率</strong>”；</p>
<ul>
<li>单位：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">(</mo><mi>k</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo separator="true">,</mo><mi>M</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo separator="true">,</mo><mi>G</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo separator="true">,</mo><mi>T</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">b/s(kb/s,Mb/s,Gb/s,Tb/s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mclose">)</span></span></span></span></li>
</ul>
</li>
</ul>
</li>
</ol>
</li>
</ul>
<p>​</p>
<ul>
<li>
<p>吞吐量</p>
<ol>
<li>
<p>吞吐量表示在<strong>单位时间内通过某个网络（或信道、接口）的数据量</strong>。</p>
</li>
<li>
<p>吞吐量被经常用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。</p>
</li>
<li>
<p>吞吐量<strong>受网络的带宽或额定速率的限制</strong>。</p>
</li>
</ol>
</li>
<li>
<p>时延</p>
<ol>
<li>发送时延</li>
</ol>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mtext>分组长度（</mtext><mi>b</mi><mtext>）</mtext></mrow><mrow><mtext>发送速率（</mtext><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mtext>）</mtext></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{分组长度（b）}{发送速率（b/s）}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.30744em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.37144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">发</span><span class="mord cjk_fallback">送</span><span class="mord cjk_fallback">速</span><span class="mord cjk_fallback">率</span><span class="mord cjk_fallback">（</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">）</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">组</span><span class="mord cjk_fallback">长</span><span class="mord cjk_fallback">度</span><span class="mord cjk_fallback">（</span><span class="mord mathdefault">b</span><span class="mord cjk_fallback">）</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<ol start="2">
<li>传播时延</li>
</ol>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mtext>信道长度（</mtext><mi>m</mi><mtext>）</mtext></mrow><mrow><mtext>电磁波传播速率（</mtext><mi>m</mi><mi mathvariant="normal">/</mi><mi>s</mi><mtext>）</mtext></mrow></mfrac><mspace linebreak="newline"></mspace><mtext>自由空间：</mtext><mn>3</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup><mi>m</mi><mi mathvariant="normal">/</mi><mi>s</mi><mspace linebreak="newline"></mspace><mtext>铜线：</mtext><mn>2.3</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup><mi>m</mi><mi mathvariant="normal">/</mi><mi>s</mi><mspace linebreak="newline"></mspace><mtext>光纤：</mtext><mn>2.0</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>8</mn></msup><mi>m</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\frac{信道长度（m）}{电磁波传播速率（m/s）}\\ 自由空间：3 \times10^8m/s \\ 铜线：2.3\times10^8m/s \\ 光纤：2.0\times10^8m/s
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.29633em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">电</span><span class="mord cjk_fallback">磁</span><span class="mord cjk_fallback">波</span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">播</span><span class="mord cjk_fallback">速</span><span class="mord cjk_fallback">率</span><span class="mord cjk_fallback">（</span><span class="mord mathdefault">m</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">）</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">道</span><span class="mord cjk_fallback">长</span><span class="mord cjk_fallback">度</span><span class="mord cjk_fallback">（</span><span class="mord mathdefault">m</span><span class="mord cjk_fallback">）</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">自</span><span class="mord cjk_fallback">由</span><span class="mord cjk_fallback">空</span><span class="mord cjk_fallback">间</span><span class="mord cjk_fallback">：</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord">/</span><span class="mord mathdefault">s</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">铜</span><span class="mord cjk_fallback">线</span><span class="mord cjk_fallback">：</span><span class="mord">2</span><span class="mord">.</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord">/</span><span class="mord mathdefault">s</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">光</span><span class="mord cjk_fallback">纤</span><span class="mord cjk_fallback">：</span><span class="mord">2</span><span class="mord">.</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1141079999999999em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mord mathdefault">m</span><span class="mord">/</span><span class="mord mathdefault">s</span></span></span></span></span></p>
<ol start="3">
<li>处理时延
<ul>
<li>一般不方便计算。</li>
</ul>
</li>
</ol>
</li>
<li>
<p>时延带宽积</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>时延带宽积</mtext><mo>=</mo><mtext>传播时延</mtext><mo>×</mo><mtext>带宽</mtext></mrow><annotation encoding="application/x-tex">时延带宽积=传播时延\times带宽
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">延</span><span class="mord cjk_fallback">带</span><span class="mord cjk_fallback">宽</span><span class="mord cjk_fallback">积</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">播</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">延</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">带</span><span class="mord cjk_fallback">宽</span></span></span></span></span></p>
<ul>
<li>
<p>若发送端连续发送数据，则在所发送的第一个比特即将到达终点时，发送端就已经发送了时延带宽积个比特；</p>
</li>
<li>
<p>链路的时延带宽积又称为<strong>以比特为单位的链路长度</strong>。</p>
</li>
</ul>
</li>
<li>
<p>往返时间</p>
<ul>
<li>在许多情况下，因特网上的信息不仅仅是单方向传输，而是双向交互。我们有时很需要知道双向交互一次所需的时间，因此，往	返时间 RTT（Round-Trip Time）也是一个重要的性能指标。</li>
</ul>
</li>
<li>
<p>利用率</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>利用率</mtext><mrow><mo fence="true">{</mo><mtable rowspacing="0.3599999999999999em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>信道利用率</mtext><mspace width="1em"/><mtext>用来表示某信道有百分之几的时间是被利用的</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>网络利用率</mtext><mspace width="1em"/><mtext>全网络的信道利用率的加权平均</mtext></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">利用率 \begin{cases}信道利用率 \quad 用来表示某信道有百分之几的时间是被利用的 \\ 网络利用率 \quad 全网络的信道利用率的加权平均 \end{cases}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0000299999999998em;vertical-align:-1.25003em;"></span><span class="mord cjk_fallback">利</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">率</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">道</span><span class="mord cjk_fallback">利</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">率</span><span class="mspace" style="margin-right:1em;"></span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">来</span><span class="mord cjk_fallback">表</span><span class="mord cjk_fallback">示</span><span class="mord cjk_fallback">某</span><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">道</span><span class="mord cjk_fallback">有</span><span class="mord cjk_fallback">百</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">之</span><span class="mord cjk_fallback">几</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">间</span><span class="mord cjk_fallback">是</span><span class="mord cjk_fallback">被</span><span class="mord cjk_fallback">利</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">的</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord cjk_fallback">网</span><span class="mord cjk_fallback">络</span><span class="mord cjk_fallback">利</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">率</span><span class="mspace" style="margin-right:1em;"></span><span class="mord cjk_fallback">全</span><span class="mord cjk_fallback">网</span><span class="mord cjk_fallback">络</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">道</span><span class="mord cjk_fallback">利</span><span class="mord cjk_fallback">用</span><span class="mord cjk_fallback">率</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">加</span><span class="mord cjk_fallback">权</span><span class="mord cjk_fallback">平</span><span class="mord cjk_fallback">均</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<ul>
<li>
<p>根据排队论，当某信道的利用率增大时，该信道引起的时延也会迅速增加，因此，信道利用率并非越高越好。</p>
</li>
<li>
<p>如果令 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">D_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 表示网络空闲时的时延，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span></span> 表示网络当前的时延，那么在适当的假定条件下，可以用下面的简单公式来表示 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi></mrow><annotation encoding="application/x-tex">D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">D_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和利用率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span> 之间的关系：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mfrac><msub><mi>D</mi><mn>0</mn></msub><mrow><mn>1</mn><mo>−</mo><mi>U</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">D=\frac{D_0}{1-U}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.1296600000000003em;vertical-align:-0.7693300000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693300000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240405175019017.png" alt="image-20240405175019017" style="zoom:50%;" />
</li>
<li>
<p>当网络利用率达到 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">50\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mord">%</span></span></span></span> 时，时延就要加倍；</p>
</li>
<li>
<p>当网络利用率超过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">50\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mord">%</span></span></span></span> 时，时延急剧增大；</p>
</li>
<li>
<p>当网络利用率接近 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">100\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">%</span></span></span></span> 时，时延趋于无穷大；</p>
</li>
<li>
<p>因此，一些拥有较大主干网的 ISP 通常会控制它们的信道利用率不超过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>50</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">50\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mord">%</span></span></span></span>，如果超过了，就要准备扩容，增大线路的带宽。</p>
</li>
<li>
<p>也不能使信道利用率太低，这会使宝贵的通信资源被白白浪费。应该使用一些机制，可以根据情况动态调整输入到网络中的通信量，使网络利用率保持在一个合理的范围内。</p>
</li>
</ul>
</li>
<li>
<p>丢包率</p>
<ul>
<li>
<p>丢包率即分组丢失率，是指在一定的时间范围内，传输过程中丢失的分组数量与总分组数量的比率。</p>
</li>
<li>
<p>丢包率具体可分为接口丢包率、结点丢包率、链路丢包率、路径丢包率、网络丢包率等等。</p>
</li>
<li>
<p>丢包率是网络运维人员非常关心的一个网络性能指标，但对于普通用户来说往往并不关心这个指标，因为他们通常意识不到网络丢包。</p>
</li>
<li>
<p>分组丢失主要有两种情况：</p>
<ul>
<li>
<p>分组在传输过程中出现误码，被结点丢弃；</p>
</li>
<li>
<p>分组到达一台队列已满的分组交换机时被丢弃；在通信量较大时就可能造成网络拥塞。</p>
</li>
</ul>
</li>
<li>
<p>因此，丢包率反映了网络的拥塞情况：</p>
<ul>
<li>
<p>无拥塞时路径丢包率为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></p>
</li>
<li>
<p>轻度拥塞时路径丢包率为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">%</mi><mo>∼</mo><mn>4</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">1\%\sim4\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">%</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">4</span><span class="mord">%</span></span></span></span></p>
</li>
<li>
<p>严重拥塞时路径丢包率为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mi mathvariant="normal">%</mi><mo>∼</mo><mn>15</mn><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">5\%\sim15\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">5</span><span class="mord">%</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.80556em;vertical-align:-0.05556em;"></span><span class="mord">1</span><span class="mord">5</span><span class="mord">%</span></span></span></span></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="1-4-计算机网络体系结构">1.4 计算机网络体系结构</h2>
<h3 id="一-常见的计算机网络体系结构">一、常见的计算机网络体系结构</h3>
<ol>
<li>
<p>OSI 体系结构</p>
<table border="1">
    <thead align="center">
    	<tr>
        	<td>7. 应用层</td>
        </tr>
        <tr>
        	<td>6. 表示层</td>
        </tr>
        <tr>
        	<td>5. 会话层</td>
        </tr>
        <tr>
        	<td>4. 运输层</td>
        </tr>
        <tr>
        	<td>3. 网络层</td>
        </tr>
        <tr>
        	<td>2. 数据链路层</td>
        </tr>
        <tr>
        	<td>1. 物理层</td>
        </tr>
    </thead>
</table>
</li>
<li>
<p>TCP/IP 体系结构</p>
<table border="1">
    <thead align="center">
    	<tr>
        	<td>4. 应用层</td>
        </tr>
        <tr>
        	<td>3. 运输层</td>
        </tr>
        <tr>
        	<td>2. 网际层</td>
        </tr>
        <tr>
        	<td>1. 网络接口层</td>
        </tr>
    </thead>
</table>
</li>
<li>
<p>原理体系结构</p>
<table border="1">
    <thead align="center">
    	<tr>
        	<td>5. 应用层</td>
        </tr>
        <tr>
        	<td>4. 运输层</td>
        </tr>
        <tr>
        	<td>3. 网络层</td>
        </tr>
        <tr>
        	<td>2. 数据链路层</td>
        </tr>
        <tr>
        	<td>1. 物理层</td>
        </tr>
    </thead>
</table>
</li>
</ol>
<h3 id="二-计算机网络体系结构分层的必要性">二、计算机网络体系结构分层的必要性</h3>
<ol>
<li>物理层：解决使用何种信号来传输比特的问题</li>
<li>数据链路层：解决分组在一个网络（或一段链路）上传输的问题</li>
<li>网络层：解决分组在多个网络上传输（路由）的问题</li>
<li>运输层：解决进程之间基于网络的通信问题</li>
<li>应用层：解决通过应用程序的交互来实现特定网络应用的问题</li>
</ol>
<h3 id="三-专用术语">三、专用术语</h3>
<ol>
<li>
<p>实体</p>
<p>定义：任何可发送或接收信息的<strong>硬件</strong>或<strong>软件进程</strong>。</p>
<ul>
<li>对等实体：收发双方<strong>相同层次中的实体</strong>。</li>
</ul>
</li>
<li>
<p>协议</p>
<p>定义：控制两个对等实体进行逻辑通信的规则的集合。</p>
<p>协议的三要素：</p>
<ul>
<li>语法：定义所交换信息的格式；</li>
<li>语义：定义收发双方所要完成的操作；</li>
<li>同步（时序）：定义收发双方的时序关系。</li>
</ul>
</li>
<li>
<p>服务</p>
<p>定义：在协议的控制下，两个对等实体间的逻辑通信使得本层能够向上一层提供服务。</p>
<ul>
<li>要实现本层协议，还需要使用下面一层所提供的服务。</li>
<li>协议是“<strong>水平的</strong>”，服务是“<strong>垂直的</strong>”。</li>
<li>实体看得见相邻下层所提供的服务，但并不知道实现该服务的具体协议。也就是说，下面的协议对上面的实体是“<strong>透明</strong>”的。</li>
</ul>
<p>服务访问点：在同一系统中相邻两层的实体交换信息的逻辑接口，用于区分不同的服务类型。</p>
<ul>
<li>数据链路层的服务访问点为帧的“类型”字段。</li>
<li>网络层的服务访问点为 IP 数据报首部中的“协议字段”。</li>
<li>运输层的服务访问点为“端口号”。</li>
</ul>
<p>服务原语：上层使用下层所提供的服务必须通过与下层<strong>交换一些命令</strong>，这些命令称为服务原语。</p>
<p>协议数据单元 PDU：<strong>对等层次之间传送的数据包</strong>称为该层的协议数据单元。</p>
<ul>
<li>物理层：比特流；</li>
<li>链路层：帧；</li>
<li>网络层：IP 数据报或分组；</li>
<li>运输层：TCP 报文或 UDP 用户数据报；</li>
<li>应用层：报文。</li>
</ul>
<p>服务数据单元 SDU：同一系统内，层与层之间交换的数据包称为服务数据单元。</p>
<p>多个 SDU 可以合并成为一个 PDU；一个 SDU 也可以划分为几个 PDU。</p>
</li>
</ol>
<h1 id="第二章-物理层">第二章 物理层</h1>
<h2 id="2-1-物理层的基本概念">2.1 物理层的基本概念</h2>
<h3 id="一-传输媒体">一、传输媒体</h3>
<ol>
<li>
<p>导引型传输媒体</p>
<ul>
<li>双绞线；</li>
<li>同轴电缆；</li>
<li>光纤。</li>
</ul>
</li>
<li>
<p>非导引型传输媒体</p>
<ul>
<li>微波通信（2~40GHz）</li>
</ul>
</li>
</ol>
<h3 id="二-物理层协议的主要任务">二、物理层协议的主要任务</h3>
<ol>
<li>机械特性：指明接口所用接线器的<strong>形状</strong>和<strong>尺寸</strong>、<strong>引脚数目</strong>和<strong>排列</strong>、<strong>固定</strong>和<strong>锁定</strong>装置。</li>
<li>电气特性：指明在接口电缆的各条线上出现的<strong>电压的范围</strong>。</li>
<li>功能特性：指明某条线上出现的某一电平的<strong>电压表示何种意义</strong>。</li>
<li>过程特性：指明对于不同功能的各种可能<strong>事件的出现顺序</strong>。</li>
</ol>
<ul>
<li>物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据的比特流。</li>
<li>物理层为数据链路层屏蔽了各种传输媒体的差异，使数据链路层只需要考虑如何完成本层的协议和服务，而不必考虑网络具体的传输媒体是什么。</li>
</ul>
<h2 id="2-2-物理层下面的传输媒体">2.2 物理层下面的传输媒体</h2>
<h3 id="一-导引型传输媒体">一、导引型传输媒体</h3>
<ol>
<li>
<p>同轴电缆</p>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240620200351617.png" alt="image-20240620200351617" style="zoom:50%;" />
<ul>
<li>
<p>基带同轴电缆（50 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Ω</span></span></span></span>）</p>
<p>数字传输，过去用于局域网</p>
</li>
<li>
<p>宽带同轴电缆（75 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Ω</span></span></span></span>）</p>
<p>模拟传输，目前主要用于有线电视</p>
</li>
</ul>
<p>特点：同轴电缆价格较贵且布线不够灵活和方便，随着集线器的出现，在局域网领域基本上都是采用双绞线作为传输媒体。</p>
</li>
<li>
<p>双绞线</p>
<ul>
<li>
<p>绞合的作用</p>
<ul>
<li>抵御部分来自外界的电磁波干扰；</li>
<li>减少相邻导线的电磁干扰</li>
</ul>
</li>
<li>
<p>无屏蔽双绞线 UTP 电缆</p>
</li>
<li>
<p>屏蔽双绞线 STP 电缆</p>
</li>
</ul>
</li>
<li>
<p>光纤</p>
<ul>
<li>
<p>纤芯直径</p>
<ul>
<li>多模光纤：50微米，62.5微米</li>
<li>单模光纤：9微米</li>
</ul>
</li>
<li>
<p>包层直径125微米</p>
</li>
<li>
<p>工作波长</p>
<ul>
<li>0.85微米（衰减较大）</li>
<li>1.30微米（衰减较小）</li>
<li>1.55微米（衰减较小）</li>
</ul>
</li>
<li>
<p>优点</p>
<ul>
<li>通信容量大（25000~30000GHZ 的带宽）</li>
<li>传输损耗小，远距离传输时更加经济</li>
<li>抗雷电和电磁干扰性能好。这在大电流脉冲干扰的环境下尤为重要。</li>
<li>无串音干扰，保密性好，不易被窃听</li>
<li>体积小，重量轻</li>
</ul>
</li>
<li>
<p>缺点</p>
<ul>
<li>割接需要专用设备</li>
<li>光电接口价格较贵</li>
</ul>
</li>
<li>
<p>多模光纤</p>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240620210026089.png" alt="image-20240620210026089" style="zoom:50%;" />
<ul>
<li>由于色散（模式、材料、波导色散），光在多模光纤中传输一定距离后必然会产生信号失真（<strong>脉冲展宽</strong>）</li>
<li>因此，多模光纤只适合<strong>近距离传输</strong>（建筑物内）</li>
<li>发送光源：发光二极管；接收检测：光电二极管</li>
</ul>
</li>
<li>
<p>单模光纤</p>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240620210315808.png" alt="image-20240620210315808" style="zoom:50%;" />
<ul>
<li><strong>没有模式色散</strong>，在1.31微米波长附近材料色散和波导色散大小相等符号相反，两者正好抵消。</li>
<li>单模光纤适合<strong>长距离传输</strong>且衰减小，但其制造成本高，对光源要求高。</li>
<li>发送光源：激光发生器；接收检测：激光检测器</li>
</ul>
</li>
</ul>
</li>
<li>
<p>电力线</p>
</li>
</ol>
<h3 id="二-非导引型传输媒体">二、非导引型传输媒体</h3>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240620211321347.png" alt="image-20240620211321347"></p>
<h2 id="2-3-传输方式">2.3 传输方式</h2>
<h3 id="一-串行传输和并行传输">一、串行传输和并行传输</h3>
<p><strong>远距离传输</strong>常使用<strong>串行传输</strong>，<strong>计算机内部传输</strong>常使用<strong>并行传输</strong>。</p>
<h3 id="二-同步传输和异步传输">二、同步传输和异步传输</h3>
<ol>
<li>
<p>同步传输</p>
<ul>
<li>收发双方时钟同步的方法
<ul>
<li>外同步：在收发双方之间添加一条单独的时钟信号线。</li>
<li>内同步：发送端将时钟同步信号编码到发送数据中一起传输（例如曼彻斯特编码）。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>异步传输</p>
<ul>
<li>字节之间异步（字节之间的时间间隔不固定）</li>
<li>字节中的每个比特仍然要同步（各比特的持续时间是相同的）</li>
</ul>
</li>
</ol>
<h3 id="三-信道及三种通信方式">三、信道及三种通信方式</h3>
<ol>
<li>信道：表示向某一个方向传送信息的媒体。它不等价于通信电路，一条可双向通信的电路往往包含一条发送信道和一条接受信道。</li>
<li>从通信双方信息交换的方式来看，有以下三种基本方式：
<ul>
<li>单向通信（单工通信）：只能有一个方向的通信而没有反方向的交互。如广播、收音机等；</li>
<li>双向交替通信（半双工通信）：通信的双方都可以发送信息，但不能双方同时发送和接收。如对讲机等；</li>
<li>双向同时通信（全双工通信）：通信的双方可以同时发送和接收信息。如电话等。</li>
</ul>
</li>
</ol>
<h2 id="2-4-编码与调制">2.4 编码与调制</h2>
<h3 id="一-数据通信的基本知识">一、数据通信的基本知识</h3>
<ol>
<li>
<p>数据：运送<strong>信息</strong>的实体。</p>
<ul>
<li>模拟数据：数据的取值连续变化。</li>
<li>数字数据：数据的取值为不连续数值。</li>
</ul>
</li>
<li>
<p>信号：数据的电气或电磁的表现，是数据的载体，是数据在传输介质上传输过程中的表现形式。</p>
</li>
<li>
<p>数据通信：指在不同计算机之间传送表示字母、数字、符号的二进制代码 0、1 比特序列的<strong>模拟或数字信号</strong>的过程。</p>
</li>
<li>
<p>模拟信号：代表数据的参数的取值是连续的，信号电平是连续变化的。</p>
</li>
<li>
<p>数字信号：代表数据的参数的取值是离散的。在使用时间域（简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形就称为<strong>码元</strong>。使用二进制编码时，只有两种不同的码元，一种表示 0 状态，一种表示 1 状态。</p>
</li>
<li>
<p>调制：将<strong>数字信号</strong>转换为<strong>模拟信号</strong>的过程。</p>
</li>
<li>
<p>解调：将<strong>模拟信号</strong>转换为<strong>数字信号</strong>的过程。</p>
</li>
</ol>
<h3 id="二-调制">二、调制</h3>
<ol>
<li>
<p>基带调制（编码）：仅对<strong>基带信号的波形进行变换</strong>，使它能够与信道特性相适应，变换后的信号仍是<strong>基带信号</strong>。</p>
<ul>
<li>
<p>基带调制常用编码方式</p>
<ul>
<li>不归零码 NRZ</li>
<li>曼彻斯特码</li>
<li>差分曼彻斯特码</li>
</ul>
</li>
<li>
<p>不归零码</p>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240621174139063.png" alt="image-20240621174139063" style="zoom:50%;" />
<ul>
<li>
<p>原理：用两种不同的电平分别表示二进制位“0”和“1”，高电平表示“0”，低电平表示“1”。</p>
</li>
<li>
<p>优点：容易实现。</p>
</li>
<li>
<p>缺点：缺乏同步功能，难以分辨一位的结束和另一位的开始；</p>
<pre><code> 	 发送方和接收方必须有时钟同步；
</code></pre>
<p>​		  若信号中“0”或“1”连续出现，信号直流分量将累加。</p>
</li>
</ul>
</li>
<li>
<p>曼彻斯特码，也称相位编码</p>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240621174256658.png" alt="image-20240621174256658" style="zoom:50%;" />
<ul>
<li>原理：每一位中间都有一个跳变，从低跳到高表示“1”，从高跳到低表示“0”。也可以反过来定义。</li>
<li>优点：克服了 NRZ 码的不足。每位中间的跳变既可以作为数据，又可以作为时钟，能够自同步。</li>
</ul>
</li>
<li>
<p>差分曼彻斯特编码</p>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240621174604483.png" alt="image-20240621174604483" style="zoom:50%;" />
<ul>
<li>原理：每一位中间都有一个跳变，每位开始时有跳变表示“0”，无跳变表示“1”。位中间跳变表示时钟，位前跳变表示数据。</li>
<li>优点：时钟、数据分离，便于提取。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>带通调制：使用<strong>载波调制</strong>，将<strong>基带信号</strong>的频率范围搬迁到较高的频段，并转为<strong>模拟信号</strong>。</p>
<ul>
<li>
<p>最基本的二元制调制方法有以下三种：</p>
<ul>
<li>调幅（AM）：载波的振幅随基带数字信号而变化；</li>
<li>调频（FM）：载波的频率随基带数字信号而变化；</li>
<li>调相（PM）：载波的初始相位随基带数字信号而变化。</li>
</ul>
</li>
<li>
<p>基本的带通调制方法</p>
<p>​	为了达到更高的信息传输速率，可采用多元制的振幅相位混合调制方法。例如正交振幅调制。</p>
</li>
</ul>
</li>
</ol>
<h2 id="2-5-信道的极限容量">2.5 信道的极限容量</h2>
<h3 id="一-码间串扰">一、码间串扰</h3>
<p>在接收端收到的信号波形失去了码元之间清晰界限，这种现象叫做码间串扰。</p>
<h3 id="二-限制码元在信道上的传输速率的因素">二、限制码元在信道上的传输速率的因素</h3>
<ol>
<li>
<p>信道能够通过的频率范围</p>
<p><strong>奈氏准则</strong></p>
<p>理想低通信道的最高码元传输速率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>2</mn><mi>W</mi><mi>B</mi><mi>a</mi><mi>u</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">=2WBaud</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">a</span><span class="mord mathdefault">u</span><span class="mord mathdefault">d</span></span></span></span></p>
<p>​	<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi></mrow><annotation encoding="application/x-tex">W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span></span></span></span> 是理想低通信道的带宽，单位为赫兹（Hz）</p>
<p>每赫兹带宽的理想低通信道的最高码元传输速率是每秒 2 个码元。</p>
<ul>
<li>
<p>Buad 是波特，是码元传输速率的单位，1 波特为每秒传送 1 个码元。</p>
</li>
<li>
<p>实际的信道所能传输的最高码元速率，要明显低于奈氏准则给出的上线数值。</p>
</li>
<li>
<p>波特（Buad）和比特（bit）是两个不同的概念。</p>
<ul>
<li>
<p>波特是码元传输的速率单位。码元传输速率也称为调制速率、波形速率或符号速率。</p>
</li>
<li>
<p>比特是信息量的单位。</p>
</li>
<li>
<p>信息的传输速率“比特/秒”与码元的传输速率“波特”在数量上有一定的关系。</p>
</li>
<li>
<p>若 1 个码元只携带 1bit 的信息量，则“比特/秒”和“波特”在数值上相等；</p>
</li>
<li>
<p>若 1 个码元携带 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>bit 的信息量，则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span></span></span></span>Baud 的码元传输速率所对应的信息传输速率为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">M \times n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>b/s。</p>
</li>
</ul>
</li>
<li>
<p>码元的传输速率受奈氏准则的制约，所以要提高信息的传输速率，就<strong>必须设法使每个码元能携带更多个比特的信息量</strong>。这就需要采用<strong>多元制</strong>的调制方法。</p>
</li>
</ul>
</li>
<li>
<p>信噪比</p>
<ul>
<li>
<p>噪声存在于所有的电子设备和通信信道中。如果信号相对较强，噪声的影响就相对较小。</p>
</li>
<li>
<p>信噪比是信号的平均功率 S 和噪声的平均功率 N 之比，常记为 S/N，单位是分贝（dB）。</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>信噪比</mtext><mo>=</mo><mn>10</mn><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>10</mn></msub><mo stretchy="false">(</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">信噪比=10log_{10}(S/N)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">信</span><span class="mord cjk_fallback">噪</span><span class="mord cjk_fallback">比</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></span></p>
<p>​	已知 S/N=10，则信噪比为 10dB;</p>
<p>​	若信噪比为 30dB，则 S/N=1000.</p>
</li>
</ul>
<p><strong>香农公式</strong></p>
<p>信道的极限信息传输速率 C 可表达为</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>W</mi><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C=Wlog_2(1+S/N)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span></span></p>
<ul>
<li>W 为信道的带宽（Hz）；</li>
<li>S/N 为信噪比。</li>
</ul>
<p>香农公式表明：</p>
<ul>
<li>信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高；</li>
<li>只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输；</li>
<li>若信道带宽 W 或信噪比 S/N 没有上限，则信道的极限信息传输速率 C 也没有上限；</li>
<li>实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少。</li>
</ul>
</li>
</ol>
<h2 id="2-6-信道复用技术">2.6 信道复用技术</h2>
<ul>
<li><strong>复用</strong>是通信技术中的基本概念。<strong>复用技术</strong>让每个用户共享一个公共信道。</li>
</ul>
<h3 id="一-频分复用-fdm">一、频分复用 FDM</h3>
<ul>
<li><strong>频分复用</strong>按频率划分不同的信道，用户在分到一定的频带后，在通信过程中自始至终占用整个频带。</li>
<li><strong>频分复用</strong>的所有用户<strong>在同样的时间</strong>占用<strong>不同的带宽资源</strong>（频率带宽）。</li>
<li>多路的原始信号在频分复用前，首先要通过<strong>频谱搬移</strong>技术，将各路信号的频谱搬移到物理信道频谱的不同段上，这可以通过不同的<strong>载波</strong>调频调制来实现。</li>
</ul>
<h3 id="二-波分复用-wdm">二、波分复用 WDM</h3>
<ul>
<li>波分复用就是<strong>光的频分复用</strong>。整个波长频带被划分为若干个波长范围，每个用户占用一个<strong>波长范围</strong>来进行传输。</li>
<li>在一根光纤上复用多路频率接近的光载波信号的方式称为<strong>波分复用 WDM</strong>。</li>
<li>在一根光纤上复用几十路或更多路数的频率接近的光载波信号称为<strong>密集波分复用 DWDM</strong>。</li>
</ul>
<h3 id="三-时分复用-tdm">三、时分复用 TDM</h3>
<ul>
<li><strong>时分复用</strong>是将时间划分为一段段等长的<strong>时分复用帧（TDM 帧）</strong>。每一个时分复用的用户在每一个 TDM 帧中<strong>占用固定序号的时隙</strong>。</li>
<li>每一个用户所占用的时隙是周期性地出现（其周期就是 TDM 帧的长度）。TDM 信号也称为等时信号。</li>
<li>时分复用的所有用户是在<strong>不同的时间</strong>占用<strong>同样的频带宽度</strong>。</li>
</ul>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240621193754596.png" alt="image-20240621193754596" style="zoom:50%;" />
<ul>
<li>
<p>时分复用可能会造成线路资源的浪费。</p>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240621194155021.png" alt="image-20240621194155021" style="zoom:50%;" />
<p>如图，当某一用户暂时无数据发送时，在时分复用帧中分配给该用户的固定时隙只能处于空闲状态，其他用户即使有数据要发送，也不能使用这些空闲的时隙，这就导致复用后的信道利用率不高。</p>
</li>
</ul>
<h3 id="四-统计时分复用-stdm">四、统计时分复用 STDM</h3>
<ul>
<li><strong>统计时分复用 STDM</strong> 是一种改进的 TDM，STDM 不是为用户固定分配时隙，而是按需动态分配时隙，它能提高信道的利用率 2~4 倍。</li>
<li>如图是 STDM 的工作原理，一个使用统计时分复用的<strong>集中器</strong>（也称为<strong>智能复用器</strong>，它存储转发报文，通过排队方式使各用户合理地共享信道）连接 4 个低速用户，将它们的数据集中起来通过高速线路发送到一个远地计算机。</li>
</ul>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240621195203402.png" alt="image-20240621195203402" style="zoom:50%;" />
<ul>
<li>统计时分复用使用 STDM 帧来发送复用的数据。每个 STDM 帧中的时隙数小于连接在集中器上的用户数。</li>
<li>在输出线路上，某一个用户所占用的时间并不是周期性地出现，因此统计时分复用也称为<strong>异步时分复用</strong>。</li>
<li>由于 STDM 帧中的时隙不是固定地分配给每个用户，输出线路上每个时隙之前的短时隙中必须含有用户的地址信息。</li>
<li>STDM 实现技术非常复杂，<strong>通常只在高速远程通信中使用</strong>，不适用于用户平均使用信道的情况。</li>
</ul>
<h3 id="五-码分复用-cdm">五、码分复用 CDM</h3>
<ul>
<li>
<p>常用的名词是<strong>码分多址 CDMA</strong>。</p>
</li>
<li>
<p>CDMA 可提高通话质量和数据传输的可靠性，减少干扰，增大通信系统的容量，降低手机的平均发射功率。</p>
</li>
<li>
<p>码片序列的概念</p>
<ul>
<li>
<p>每一个比特时间划分为 <strong>m 个短的间隔</strong>，称为<strong>码片</strong>。</p>
</li>
<li>
<p>每个站被指派一个唯一的 m bit 码片序列。</p>
<ul>
<li>如发送比特 1，则发送自己的 m bit 码片序列；</li>
<li>如发送比特 0，则发送该码片序列的二进制反码。</li>
</ul>
</li>
<li>
<p>按惯例将码片中的 0 写为 -1，将 1 写成 +1。</p>
</li>
</ul>
</li>
<li>
<p>假定 S 站要发送信息的数据率为 b bit/s，由于每个比特要转换成 m 比特的码片序列，因此 S 站发送的数据率提高到 mb bit/s，同时 S 站所占用的频带宽度也提高到原数值的 m 倍。这种通信方式称为<strong>扩频</strong>通信。</p>
</li>
<li>
<p>码分多址 CDMA，通过不同的<strong>扩频码</strong>来实现多用户在同一时间同一频率上共享信道。即各用户在<strong>相同的时间</strong>使用<strong>相同的频带</strong>。</p>
</li>
<li>
<p>各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。</p>
</li>
<li>
<p>这种系统发送的信号有很强的抗干扰能力，其频谱类似于白噪声，不易被发现。</p>
</li>
<li>
<p>CDMA 的重要特点</p>
<ul>
<li>每个站分配的码片序列不仅必须<strong>各不相同</strong>，并且还必须互相<strong>正交</strong>；</li>
<li>在实用的系统中是使用<strong>伪随机码序列</strong>。</li>
</ul>
</li>
<li>
<p>码片序列的正交关系</p>
<ul>
<li>
<p>令向量 S 表示站 S 的码片向量，令 T 表示其他任何站的码片向量。</p>
</li>
<li>
<p>两个不同站的码片序列正交，就是向量 S 和 T 的规格化内积都是 0：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>⋅</mo><mi>T</mi><mo>≡</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>S</mi><mi>i</mi></msub><msub><mi>T</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S \cdot T \equiv \frac{1}{m}\sum_{i=1}^mS_iT_i=0
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span></span></p>
</li>
<li>
<p>任何一个码片向量和该码片向量自己的规格化内积都是 1.</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>⋅</mo><mi>S</mi><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msub><mi>S</mi><mi>i</mi></msub><msub><mi>S</mi><mi>i</mi></msub><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><msubsup><mi>S</mi><mi>i</mi><mn>2</mn></msubsup><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mo stretchy="false">(</mo><mo>±</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">S\cdot S=\frac{1}{m}\sum_{i=1}^mS_iS_i=\frac{1}{m}\sum_{i=1}^mS_i^2=\frac{1}{m}\sum_{i=1}^m(\pm1)^2=1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.32144em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord">±</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span></p>
</li>
<li>
<p>一个码片向量和该码片反码的向量的规格化内积值都是 -1.</p>
</li>
</ul>
</li>
<li>
<p>CDMA 的工作原理</p>
<ul>
<li>
<p>假设有个 X 站要接收 S 站发送的数据，X 站必须知道 S 站的码片序列。X 站使用得到的码片向量 S 与接收到的未知信号进行求内积的计算。X 站接收到的未知信号是各个站发送的码片序列之和。</p>
</li>
<li>
<p>根据上面两个公式，再根据叠加原理，求内积得到的结果是：</p>
<p>​	所有其他站的信号都被过滤掉，而只剩下 S 站发送的信号。</p>
<p>​	当 S 站发送比特 1 时，在 X 站计算内积的结果是 +1；</p>
<p>​	当 S 站发送比特 0 时，在 X 站计算内积的结果是 -1；</p>
<p>​	当 S 站不发送数据时，内积的结果是 0.</p>
</li>
</ul>
</li>
</ul>
<h1 id="第三章-数据链路层">第三章 数据链路层</h1>
<h2 id="3-1-数据链路层概述">3.1 数据链路层概述</h2>
<ul>
<li>
<p>链路：从一个结点到另一个结点的一段物理线路，而中间没有任何其他的交换结点。</p>
</li>
<li>
<p>数据链路：指把实现通信协议的硬件和软件加到链路上，就构成了数据链路。</p>
</li>
<li>
<p>数据链路层以<strong>帧</strong>为单位传输和处理数据。</p>
</li>
<li>
<p>使用点对点信道的数据链路层的三个重要问题：</p>
<ul>
<li>封装成帧</li>
<li>差错检测</li>
<li>可靠传输</li>
</ul>
</li>
<li>
<p>使用广播信道的数据链路层</p>
<ul>
<li>共享式以太网的媒体接入控制协议 CSMA/CD</li>
<li>802.11 局域网的媒体接入控制协议 CSMA/CA</li>
</ul>
</li>
<li>
<p>数据链路层的互联设备</p>
<ul>
<li>网桥和交换机的工作原理</li>
<li>集线器（物理层互联设备）与交换机的区别</li>
</ul>
</li>
</ul>
<h2 id="3-2-封装成帧">3.2 封装成帧</h2>
<ul>
<li>
<p>封装成帧是指数据链路层给上层交付的协议数据单元添加帧头和帧尾使之成为帧。</p>
<ul>
<li>帧头和帧尾中包含有重要的控制信息；</li>
<li>帧头和帧尾的作用之一就是<strong>帧定界</strong>。</li>
</ul>
</li>
<li>
<p><strong>透明传输</strong>是指<strong>数据链路层对上层交付的传输数据没有任何限制</strong>，就好像数据链路层不存在一样。</p>
<ul>
<li>面向字节的物理链路使用字节填充（或称字符填充）的方法实现透明传输。</li>
<li>面向比特的物理链路使用<strong>比特填充</strong>的方法实现透明传输。
<ul>
<li><strong>零比特填充法</strong>：每五个连续 1 后面插入一个比特 0.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>为了调高帧的传输效率，应当使<strong>帧的数据部分的长度尽可能大些</strong>。</p>
</li>
<li>
<p>考虑到差错控制等因素，每一种数据链路层协议都规定了帧的数据部分的长度上限，即最大传送单元 MTU。</p>
</li>
</ul>
<h2 id="3-3-差错检测">3.3 差错检测</h2>
<ul>
<li>
<p>比特差错：实际的通信链路都不是理想的，比特在传输过程中可能会出现差错：1 可能变成 0，0 可能变成 1.</p>
</li>
<li>
<p>误码率 BER：在一段时间内，传输错误的比特占所传输比特总数的比率。</p>
</li>
<li>
<p>使用<strong>差错检错码</strong>来检测数据在传输过程中是否产生了比特差错，是数据链路层所要解决的重要问题之一。</p>
</li>
<li>
<p>奇偶校验</p>
<ul>
<li>在待发送的数据后面<strong>添加 1 位奇偶校验位</strong>，使整个数据（包括所添加的校验位在内）中**“1”的个数**为奇数（奇校验）或偶数（偶校验）。</li>
<li>如果有<strong>奇数个位发生误码</strong>，则奇偶性发生变化，<strong>可以检查出误码</strong>；</li>
<li>如果有<strong>偶数个位发生误码</strong>，则奇偶性不发生变化，<strong>不能检查出误码（漏检）</strong>。</li>
</ul>
</li>
<li>
<p>循环冗余校验 CRC</p>
<ul>
<li>收发双方约定好一个<strong>生成多项式</strong> G(x)；</li>
<li>发送方基于待发送的数据和生成多项式计算出差错检测码（<strong>冗余码</strong>），将其添加到待传输数据的后面一起传输；</li>
<li>接收方通过生成多项式来计算收到的数据是否产生了误码；</li>
</ul>
</li>
</ul>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240623203454781.png" alt="image-20240623203454781" style="zoom:50%;" />
<p>​			生成多项式举例</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>x</mi><mn>4</mn></msup><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>x</mi><mo>+</mo><mn>1</mn><mo>=</mo><mn>1</mn><mo>⋅</mo><msup><mi>x</mi><mn>4</mn></msup><mo>+</mo><mn>0</mn><mo>⋅</mo><msup><mi>x</mi><mn>3</mn></msup><mo>+</mo><mn>1</mn><mo>⋅</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mn>1</mn><mo>⋅</mo><msup><mi>x</mi><mn>1</mn></msup><mo>+</mo><mn>1</mn><mo>⋅</mo><msup><mi>x</mi><mn>0</mn></msup><mspace linebreak="newline"></mspace><mtext>生成多项式各项系数构成的比特串：</mtext><mn>10111</mn></mrow><annotation encoding="application/x-tex">G(x)=x^4+x^2+x+1=1\cdot x^4+0\cdot x^3+1\cdot x^2+1\cdot x^1+1\cdot x^0\\
生成多项式各项系数构成的比特串：10111
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8641079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">生</span><span class="mord cjk_fallback">成</span><span class="mord cjk_fallback">多</span><span class="mord cjk_fallback">项</span><span class="mord cjk_fallback">式</span><span class="mord cjk_fallback">各</span><span class="mord cjk_fallback">项</span><span class="mord cjk_fallback">系</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">构</span><span class="mord cjk_fallback">成</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">比</span><span class="mord cjk_fallback">特</span><span class="mord cjk_fallback">串</span><span class="mord cjk_fallback">：</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span></span></span></span></span></p>
<p>​			常用的生成多项式</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>R</mi><mi>C</mi><mo>−</mo><mn>16</mn><mo>=</mo><msup><mi>x</mi><mn>16</mn></msup><mo>+</mo><msup><mi>x</mi><mn>15</mn></msup><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mn>1</mn><mspace linebreak="newline"></mspace><mi>C</mi><mi>R</mi><mi>C</mi><mo>−</mo><mi>C</mi><mi>C</mi><mi>I</mi><mi>T</mi><mi>T</mi><mo>=</mo><msup><mi>x</mi><mn>16</mn></msup><mo>+</mo><msup><mi>x</mi><mn>12</mn></msup><mo>+</mo><msup><mi>x</mi><mn>5</mn></msup><mo>+</mo><mn>1</mn><mspace linebreak="newline"></mspace><mi>C</mi><mi>R</mi><mi>C</mi><mo>−</mo><mn>32</mn><mo>=</mo><msup><mi>x</mi><mn>32</mn></msup><mo>+</mo><msup><mi>x</mi><mn>26</mn></msup><mo>+</mo><msup><mi>x</mi><mn>23</mn></msup><mo>+</mo><msup><mi>x</mi><mn>22</mn></msup><mo>+</mo><msup><mi>x</mi><mn>16</mn></msup><mo>+</mo><msup><mi>x</mi><mn>12</mn></msup><mo>+</mo><msup><mi>x</mi><mn>11</mn></msup><mo>+</mo><msup><mi>x</mi><mn>10</mn></msup><mo>+</mo><msup><mi>x</mi><mn>8</mn></msup><mo>+</mo><msup><mi>x</mi><mn>7</mn></msup><mo>+</mo><msup><mi>x</mi><mn>5</mn></msup><mo>+</mo><msup><mi>x</mi><mn>4</mn></msup><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">CRC-16=x^{16}+x^{15}+x^2+1\\
CRC-CCITT=x^{16}+x^{12}+x^5+1\\
CRC-32=x^{32}+x^{26}+x^{23}+x^{22}+x^{16}+x^{12}+x^{11}+x^{10}+x^8+x^7+x^5+x^4+x^2+x+1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">5</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span></p>
<ul>
<li>
<p><strong>检错码</strong>只能检测出帧在传输过程中出现了差错，但不能定位错误，因此<strong>无法纠正错误</strong>。</p>
</li>
<li>
<p>要想纠正传输中的差错，可以使用冗余信息更多的<strong>纠错码</strong>进行<strong>前向纠错</strong>。但纠错码的开销比较大，在<strong>计算机网络中较少使用</strong>。</p>
</li>
<li>
<p>循环冗余校验 <strong>CRC</strong> 有很好的纠错能力（<strong>漏检率非常低</strong>），虽然计算比较复杂，但非常<strong>易于用硬件实现</strong>，因此被<strong>广泛应用于数据链路层</strong>。</p>
</li>
<li>
<p>在计算机网络中通常采用后续课程中的<strong>检错重传方式来纠正传输中的差错</strong>，<strong>或者仅仅是丢弃检测到差错的帧</strong>，这取决于数据链路层向其上层提供的是可靠传输服务还是不可靠传输服务。</p>
</li>
</ul>
<h2 id="3-4-可靠传输">3.4 可靠传输</h2>
<h3 id="一-可靠传输的基本概念">一、可靠传输的基本概念</h3>
<ul>
<li>一般情况下，<strong>有线链路</strong>的误码率比较低，为了减小开销，并<strong>不要求数据链路层</strong>向上提供<strong>可靠</strong>传输服务。即使出现了误码，可靠传输的问题由其上层处理。</li>
<li><strong>无线链路</strong>易受干扰，误码率较高，因此<strong>要求数据链路层</strong>必须向上层提供<strong>可靠</strong>传输服务。</li>
<li><strong>比特差错</strong>只是传输差错中的一种。从整个计算机网络体系结构来看，传输差错还包括<strong>分组丢失</strong>、<strong>分组失序</strong>以及<strong>分组重复</strong>。</li>
<li>分组丢失、分组失序和分组重复这些传输差错，一般不会出现在数据链路层，而会出现在其上层。</li>
<li><strong>可靠传输服务并不仅局限于数据链路层</strong>，其他各层均可选择实现可靠传输。</li>
<li>可靠传输的实现比较复杂，开销也比较大，是否使用可靠传输取决于应用需求。</li>
</ul>
<h3 id="二-停止-等待协议-sw">二、停止-等待协议 SW</h3>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240623212706216.png" alt="image-20240623212706216"></p>
<p>注意事项</p>
<ul>
<li>
<p>接收端检测到数据分组有误码时，将其丢弃并等待发送方的超时重传。但对于误码率较高的点对点链路，为使发送方<strong>尽早重传</strong>，也可<strong>给发送方发送 NAK 分组</strong>。</p>
</li>
<li>
<p>为了让接收方能够判断所收到的数据是否是重复的，需要给<strong>数据分组编号</strong>。由于停止-等待协议的停等特性，<strong>只需要 1 个比特编号</strong>就够了，即编号 0 和 1.</p>
</li>
<li>
<p>为了让发送方能够判断所收到的 ACK 分组是否是重复的，需要给 <strong>ACK 分组编号</strong>，所用比特数量<strong>与数据分组编号所用比特数量一样</strong>。数据链路层一般不会出现 ACK 分组迟到的情况，因此在<strong>数据链路层实现停止-等待协议可以不用给 ACK 分组编号</strong>。</p>
</li>
<li>
<p>超时计时器设置的<strong>重传时间</strong>应仔细选择。一般可将重传时间选为<strong>略大于“从发送方到接收方的平均往返时间”</strong>。</p>
<ul>
<li>在数据链路层点对点的往返时间比较确定，重传时间比较好设定；</li>
<li>然而在运输层，由于端到端往返时间非常不稳定，设置合适的重传时间有时并不容易。</li>
</ul>
</li>
<li>
<p>停等协议的信道利用率</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mo>=</mo><mfrac><msub><mi>T</mi><mi>D</mi></msub><mrow><msub><mi>T</mi><mi>D</mi></msub><mo>+</mo><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><msub><mi>T</mi><mi>A</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">U=\frac{T_D}{T_D+RTT+T_A}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.19633em;vertical-align:-0.8360000000000001em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.36033em;"><span style="top:-2.3139999999999996em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8360000000000001em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">T_D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：发送方发送数据所耗费的发送时延；</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">RTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span></span>：收发双方之间的往返时间；</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">T_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：接收方发送确认分组所耗费的发送时延。</p>
<p>一般 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>A</mi></msub><mo>≪</mo><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">T_A\ll T_D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≪</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，所以计算 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span> 时可以省略 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>A</mi></msub></mrow><annotation encoding="application/x-tex">T_A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</p>
<ul>
<li>当往返时延 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><mi>T</mi></mrow><annotation encoding="application/x-tex">RTT</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span></span></span></span> 远大于数据帧发送时延 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">T_D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 时（例如使用卫星链路），信道利用率非常低。</li>
<li>若出现重传，则对于传送有用的数据信息时，信道利用率还要降低。</li>
</ul>
</li>
</ul>
<h3 id="三-回退-n-帧协议-gbn">三、回退 N 帧协议 GBN</h3>
<ul>
<li>
<p>发送方</p>
<ul>
<li>
<p>发送窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的取值范围是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo><msub><mi>W</mi><mi>T</mi></msub><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1&lt;W_T\leq2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> 是构成分组序号的比特数量。</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_T=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 时，停止-等待协议；</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>&gt;</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_T&gt;2^n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.747722em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 时，接收方无法分辨新、旧数据分组。</li>
</ul>
</li>
<li>
<p>发送方可在未收到接收方确认分组的情况下，将序号落在发送窗口内的多个数据分组全部发送出去；</p>
</li>
<li>
<p>发送方只有收到对已发送数据分组的确认时，发送窗口才能向前相应滑动；</p>
</li>
<li>
<p>发送方收到多个重复确认时，可在重传计时器超时前尽早开始重传，由具体实现决定。</p>
</li>
<li>
<p>发送方发送窗口内某个已发送的数据分组产生超时重发时，其后续在发送窗口内且已发送的数据分组也必须全部重传，这就是回退 N 帧协议名称的由来。</p>
</li>
</ul>
</li>
<li>
<p>接收方</p>
<ul>
<li>
<p>接收方的接收窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">W_R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的取值范围是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_R=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，因此接收方只能按序接收数据分组。</p>
</li>
<li>
<p>接收方只接收序号落在接收窗口内且无误码的数据分组，并且将接收窗口向前滑动一个位置，与此同时给发送方发回相应的确认分组。为了减少开销，接收方不一定每收到一个按序到达且无误码的数据分组就给发送方发回一个确认分组。</p>
<ul>
<li>而是可以在连续收到好几个按序到达且无误码的数据分组后（由具体实现决定），才针对最后一个数据分组发送确认分组，这称为累计确认；</li>
<li>或者可以在自己有数据分组要发送时才对之前按序到达且无误码的数据分组进行稍待确认；</li>
</ul>
</li>
<li>
<p>接收方收到未按序到达的数据分组，除丢弃外，还要对最近按序接收的数据分组进行确认，</p>
</li>
</ul>
</li>
<li>
<p>回退 N 帧协议在流水线传输的基础上利用发送窗口来限制发送方连续发送数据分组的数量，是一种连续 ARQ 协议。在协议的工作过程中发送窗口和接收窗口不断向前滑动，因此这类协议又称为滑动窗口协议。由于回退 N 帧协议的特性，当通信线路质量不好时，其信道利用率并不比停止-等待协议高。</p>
</li>
</ul>
<h3 id="四-选择重传协议-sr">四、选择重传协议 SR</h3>
<ul>
<li>
<p>为了进一步提高性能，可设法只重传出现误码的数据分组。因此，接收窗口的尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">W_R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> <strong>不应再等于 1（而应大于 1）</strong>，以便<strong>接收方先收下失序但无误码并且序号落在接收窗口内的那些数据分组</strong>，等到所缺分组收齐后再一并送交上层。这就是<strong>选择重传协议</strong>。</p>
</li>
<li>
<p>发送方</p>
<ul>
<li>
<p>发送方的发送窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 必须满足：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo><msub><mi>W</mi><mi>T</mi></msub><mo>≤</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">1&lt;W_T\leq 2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> 是构成分组序号的比特数量；</p>
<ul>
<li>若 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_T=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>：与停止-等待协议相同；</li>
<li>若 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>&gt;</mo><msup><mn>2</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">W_T&gt;2^{n-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>：造成接收方无法分辨新、旧数据分组的问题。</li>
</ul>
</li>
<li>
<p>发送方可在未收到接收方确认分组的情况下，将序号落在发送窗口内的多个数据分组全部发送出去；</p>
</li>
<li>
<p>发送方只有按序收到对已发送数据分组的确认时，发送窗口才能向前相应滑动；若未收到按序到达的确认分组时，对其进行记录，以防止其相应数据分组的超时重发，但发送窗口不能向前滑动。</p>
</li>
</ul>
</li>
<li>
<p>接收方</p>
<ul>
<li>
<p>接收方的接收窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">W_R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 必须满足：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo><msub><mi>W</mi><mi>R</mi></msub><mo>≤</mo><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">1&lt;W_R\leq W_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>若 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_R=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>：与停止-等待协议相同；</li>
<li>若 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub><mo>&gt;</mo><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_R&gt;W_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：无意义。</li>
</ul>
</li>
<li>
<p>接收方可接收未按序到达但没有误码并且序号落在接收窗口内的数据分组；</p>
<ul>
<li>为了使发送方仅重传出现差错的分组，接收方不能再采用累积确认，而需要对每个正确接收到的数据分组进行逐一确认。</li>
</ul>
</li>
<li>
<p>接收方只有在按序接收数据分组后，接收窗口才能向前相应滑动。</p>
</li>
</ul>
</li>
</ul>
<h2 id="3-5-点对点协议-ppp">3.5 点对点协议 PPP</h2>
<ul>
<li>
<p>点对点协议 PPP（<strong>P</strong>oint-to-<strong>P</strong>oint <strong>P</strong>rorocol）是目前使用最广泛的点对点数据链路层协议。</p>
</li>
<li>
<p>PPP 协议为在点对点链路传输各种协议数据报提供了一个标准方法，主要由以下三部分构成：</p>
<ul>
<li>对各种协议数据报的封装方法（封装成帧）</li>
<li>链路控制协议 LCP，用于建立、配置以及测试数据链路的连接</li>
<li>一套网络控制协议 NCPs，其中的每一个协议支持不同的网络层协议</li>
</ul>
</li>
<li>
<p>帧格式</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240624203720461.png" alt="image-20240624203720461"></p>
<ul>
<li>
<p>标志（<strong>F</strong>lag）字段：PPP 帧的定界符，取值为 0x7E；</p>
</li>
<li>
<p>地址（<strong>A</strong>ddress）字段：取值为 0xFF，，预留（目前没什么作用）；</p>
</li>
<li>
<p>控制（<strong>C</strong>ontrol）字段：取值为 0x03，预留（目前没有什么作用）；</p>
</li>
<li>
<p>协议（<strong>P</strong>rotocol）：指明帧的数据部分交送哪个协议处理：</p>
<ul>
<li>取值 0x0021 表示：帧的数据部分为 IP 数据报；</li>
<li>取值 0xC021 表示：帧的数据部分为 LCP 分组；</li>
<li>取值 0x8021 表示：帧的数据部分为 NCP 分组。</li>
</ul>
</li>
<li>
<p>帧检验序列（<strong>F</strong>rame <strong>C</strong>heck <strong>S</strong>equence）字段：CRC 计算出的校验位。</p>
</li>
</ul>
</li>
<li>
<p>透明传输（取决于实现透明传输的方法）</p>
<ul>
<li>
<p>面向字节的异步链路：使用字节填充法，插入“转义字符”：</p>
<ul>
<li>
<p>发送方的处理：</p>
<ul>
<li>
<p>出现的每一个 <strong>7E</strong>（PPP 帧的定界符）字节转变成 2 字节序列（<strong>7D +（原字符 - 0x20）</strong>）；</p>
</li>
<li>
<p>出现的每一个 <strong>7D</strong>（转义字符）字节转变成 2 字节序列（<strong>7D +（原字符  -0x20）</strong>）；</p>
</li>
<li>
<p>出现的每一个 ASCII 码控制字符（<strong>数值小于 0x20 的字符</strong>），则在该字符前面插入一个 7D 字节，同时将该字符的编码<strong>加上 0x20</strong>。</p>
</li>
</ul>
</li>
<li>
<p>接收方的处理：</p>
<ul>
<li>进行反变换即可恢复出原来的帧的数据部分。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>面向比特的同步链路：使用比特填充法，插入“比特 0”.</p>
<ul>
<li>
<p>发送方的处理：</p>
<ul>
<li>对帧的数据部分进行扫描（一般由硬件实现）。只要发现 5 个连续的比特 1，则立即填充 1 个比特 0；</li>
</ul>
</li>
<li>
<p>接收方的处理：</p>
<ul>
<li>对帧的数据部分进行扫描（一般由硬件实现）。只要发现五个连续的比特 1，就把其后的 1 个比特 0 删除。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>差错检测</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>R</mi><mi>C</mi><mo>−</mo><mi>C</mi><mi>C</mi><mi>I</mi><mi>T</mi><mi>T</mi><mo>=</mo><msup><mi>x</mi><mn>16</mn></msup><mo>+</mo><msup><mi>x</mi><mn>12</mn></msup><mo>+</mo><msup><mi>x</mi><mn>5</mn></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">CRC-CCITT=x^{16}+x^{12}+x^5+1
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.9474379999999999em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></span></p>
<p>接收方每收到一个 PPP 帧，就进行 CRC 检验。若 CRC 检验正确，就收下这个帧；反之，就丢弃这个帧。使用 PPP 的数据链路层<strong>向上不提供可靠传输服务</strong>。</p>
</li>
<li>
<p>工作状态</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240624210222274.png" alt="image-20240624210222274"></p>
</li>
</ul>
<h2 id="3-6-媒体接入控制-mac">3.6 媒体接入控制 MAC</h2>
<h3 id="一-媒体接入控制的基本概念">一、媒体接入控制的基本概念</h3>
<ul>
<li>共享信道要着重考虑的一个问题就是如何协调多个发送和接收站点对一个共享传输媒体的占用，即媒体接入控制 MAC（<strong>M</strong>edium <strong>A</strong>ccess <strong>C</strong>ontrol）。</li>
</ul>
<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240624210951494.png" alt="image-20240624210951494" style="zoom:150%;" />
<ul>
<li>随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的使用点对点链路和链路层交换机的交换式局域网在有线领域已完全取代了共享式局域网，但由于无线信道的广播天性，无线局域网仍然使用的是共享媒体技术。</li>
</ul>
<h3 id="二-静态划分信道">二、静态划分信道</h3>
<ul>
<li>
<p>信道复用</p>
<ul>
<li>复用是通信技术中的一个重要概念。复用就是通过一条物理信道同时传输多路用户的信号。</li>
<li>当网络中传输媒体的传输容量大于多条单一信道传输的总通信量时，可利用复用技术在一条物理线路上建立多条通信信道来充分利用传输媒体的带宽。</li>
</ul>
</li>
<li>
<p>频分复用 FDM：频分复用的所有用户同时占用不同的频带资源并行通信。</p>
</li>
<li>
<p>时分复用 TDM：时分复用的所有用户在不同的时间占用同样的频带宽度。</p>
</li>
<li>
<p>波分复用 WDM：光的频分复用。</p>
</li>
<li>
<p>码分复用 CDM</p>
</li>
<li>
<p>复用：将单一媒体的频带资源划分成很多子信道，这些子信道之间相互独立，互不干扰。从媒体的整体频带资源上看，每个子信道只占用该媒体频带资源的一部分。</p>
</li>
<li>
<p>多址（多点接入）：处理的是动态分配信道给用户。这在用户仅仅暂时性地占用信道的应 用中是必须的，而所有的移动通信系统基本上都属于这种情况。相反，在信道永久性地分配给用户的应用中，多址是不需要的（对于无线广播或电视广播站就是这样）。</p>
</li>
</ul>
<h3 id="三-随机接入">三、随机接入</h3>
<h4 id="1-csma-cd-协议">1. CSMA/CD 协议</h4>
<p>总线局域网使用的协议——载波监听<strong>多址接入</strong>/碰撞检测 CS<strong>MA</strong>/CD（<strong>C</strong>arrier <strong>S</strong>ense <strong>M</strong>ultiple <strong>A</strong>ccess/<strong>C</strong>ollision <strong>D</strong>etection）</p>
<ul>
<li>
<p>多址接入 MA：多个站连接在一条总线上，竞争使用总线。</p>
</li>
<li>
<p>载波监听 CS：每一个站在发送帧之前先要检测一下总线上是否有其他站点在发送帧（“先听后说”）：</p>
<ul>
<li>若检测到总线空闲 96 比特时间，则发送这个帧；</li>
<li>若检测到总线忙，则继续检测并等待总线转为空闲 96 比特时间，然后发送这个帧。</li>
</ul>
</li>
<li>
<p>碰撞检测 CD：每一个正在发送帧的站边发送边检测碰撞（“边说边听”）：</p>
</li>
<li>
<p>一旦发现总线上出现碰撞，则立即停止发送，退避一段随机时间后再次发送（“一旦冲突，立即听说，等待时机，重新再说”）。</p>
</li>
<li>
<p>强化碰撞：以太网还采取一种叫做<strong>强化碰撞</strong>的措施。这就是当发送帧的站点一旦检测到碰撞，除了立即停止发送帧外，还要再继续发送 <strong>32 比特或 48 比特的人为干扰信号</strong>，以便<strong>有足够多的碰撞信号使所有站点都能检测出碰撞</strong>。</p>
</li>
<li>
<p>争用期</p>
<p>​	<img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240625103400455.png" alt="image-20240625103400455"></p>
<ul>
<li>主机最多经过 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span>（即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mo>→</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\delta\rightarrow0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>）的时长就可检测到本次发送是否遭受了碰撞；</li>
<li>因此，以太网的端到端往返传播时延 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span> 称为<strong>争用期</strong>或<strong>碰撞窗口</strong>。</li>
<li>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</li>
<li>每一个主机在自己发送帧之后的一小段时间内，存在着遭遇碰撞的可能性。这一小段时间是不确定的。它取决于另一个发送帧的主机到本主机的距离，但不会超过总线的端到端往返传播时延，即一个争用期时间。</li>
<li>显然，在以太网中发送帧的主机越多，端到端往返传播时延越大，发生碰撞的概率越大。因此，共享式以太网不能连接太多的主机，使用的总线也不能太长。
<ul>
<li>10Mb/s 以太网把争用期定为 512 比特发送时间，即 51.2 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span>，因此其总线长度不能超过 5210 m，但考虑到其他一些因素，如信号衰减等，以太网规定总线长度不能超过 2500 m。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>最小帧长</p>
<ul>
<li><strong>以太网规定最小帧长为 64 字节</strong>，即 512 比特（512 比特时间即为争用期）；
<ul>
<li>如果要发送的数据非常小，那么必须加入一些填充字节，使帧长不小于 64 字节。</li>
</ul>
</li>
<li>以太网的<strong>最小帧长确保了主机可在帧发送完成之前就检测到该帧的发送过程中是否遭遇了碰撞</strong>；
<ul>
<li>如果在争用期（共发送 64 字节）没有检测到碰撞，那么后续发出的数据就一定不会发生碰撞；</li>
<li>如果在争用期内检测到碰撞，就立即终止发送，这是已经发送出去的数据一定小于 64 字节，因此<strong>凡长度小于 64 字节的帧都是由于碰撞而异常终止的无效帧</strong>。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>最大帧长</p>
<ul>
<li>以太网 V2 的 MAC 帧：数据载荷为 46~1500 字节；</li>
<li>插入 VLAN 标记后的 802.1Q 帧为 42~1500 字节。</li>
</ul>
</li>
<li>
<p>截断二进制指数退避算法</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>退避时间</mtext><mo>=</mo><mtext>基本退避时间</mtext><mo>×</mo><mtext>随机数</mtext><mi>r</mi></mrow><annotation encoding="application/x-tex">退避时间=基本退避时间\times随机数r
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">退</span><span class="mord cjk_fallback">避</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">间</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">基</span><span class="mord cjk_fallback">本</span><span class="mord cjk_fallback">退</span><span class="mord cjk_fallback">避</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">间</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">随</span><span class="mord cjk_fallback">机</span><span class="mord cjk_fallback">数</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span></span></p>
<p>​		基本退避时间：争用期 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span>.</p>
<p>​		随机数 r：r 从离散的整数集合 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mo stretchy="false">(</mo><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{0,1,...,(2^k-1)\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mclose">}</span></span></span></span> 中<strong>随机选出</strong>一个数，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mi>M</mi><mi>i</mi><mi>n</mi><mo stretchy="false">[</mo><mtext>重传次数，</mtext><mn>10</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">k=Min[重传次数，10]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span><span class="mopen">[</span><span class="mord cjk_fallback">重</span><span class="mord cjk_fallback">传</span><span class="mord cjk_fallback">次</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">，</span><span class="mord">1</span><span class="mord">0</span><span class="mclose">]</span></span></span></span>.</p>
<ul>
<li>若连续多次发生碰撞，就表明可能有较多的主机参与竞争信道。但使用上述退避算法可<strong>使重传需要推迟的平均时间随重传次数而增大（动态退避）</strong>，因而<strong>减小发生碰撞的概率</strong>，有利于整个系统的稳定。</li>
<li><strong>当重传达 16 次仍不能成功时</strong>，表明同时打算发送帧的主机太多，以至于连续发生碰撞，则<strong>丢弃该帧</strong>，并向高层报告。</li>
</ul>
</li>
<li>
<p>信道利用率</p>
<ul>
<li>
<p>考虑以下这种理想情况：</p>
<ul>
<li>
<p>各主机发送帧都不会产生碰撞；</p>
</li>
<li>
<p>总线一旦空闲就有某个主机立即发送帧；</p>
</li>
<li>
<p>发送一帧占用总线的时间为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub><mo>+</mo><mi>τ</mi></mrow><annotation encoding="application/x-tex">T_0+\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.1132em;">τ</span></span></span></span>，而帧本身的发送时间是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，</p>
<p>极限信道利用率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mi>α</mi></mrow></mfrac><mo separator="true">,</mo><mspace width="1em"/><mi>α</mi><mo>=</mo><mfrac><mi>τ</mi><msub><mi>T</mi><mn>0</mn></msub></mfrac></mrow><annotation encoding="application/x-tex">S_{max}=\frac{1}{1+\alpha},\quad \alpha=\frac{\tau}{T_0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">m</span><span class="mord mathdefault mtight">a</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.2484389999999999em;vertical-align:-0.403331em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight" style="margin-right:0.0037em;">α</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.403331em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.140492em;vertical-align:-0.44509999999999994em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em;"><span style="top:-2.357em;margin-left:-0.13889em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.1132em;">τ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.44509999999999994em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<p>​	可知，参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span> 的值尽量小，以提高信道利用率；以太网端到端的距离受到限制；以太网帧的长度应尽量长些。</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>帧发送流程</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240625111033253.png" alt="image-20240625111033253"></p>
</li>
<li>
<p>帧接收流程</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240626150333197.png" alt="image-20240626150333197"></p>
</li>
</ul>
<h4 id="2-csma-ca-协议">2. CSMA/CA 协议</h4>
<p>无线局域网使用的协议——载波监听多址接入/碰撞避免 CSMA/CA（<strong>C</strong>arrier <strong>S</strong>ense <strong>M</strong>ultiple <strong>A</strong>ccess/<strong>C</strong>ollision <strong>A</strong>voidance）</p>
<ul>
<li>
<p><strong>在无线局域网中，不能使用碰撞检测 CD</strong>，原因如下：</p>
<ul>
<li>由于无线信号的传输条件特殊，其信号强度的动态范围非常大，无线网卡上接收到的信号强度往往会远远小于发送信号的强度（可能相差百万倍）。<strong>如果要在无线网卡上实现碰撞检测 CD，对硬件的要求非常高</strong>。</li>
<li>即使能够在硬件上实现无线局域网的碰撞检测功能，但由于无线电波传输的特殊性（<strong>存在隐蔽站问题</strong>），<strong>进行碰撞检测的意义也不大</strong>。</li>
</ul>
</li>
<li>
<p><strong>802.11 无线局域网</strong>使用 CSMA/CA 协议，在 CSMA 的基础上增加了一个<strong>碰撞避免 CA 功能</strong>，而不再实现碰撞检测功能。</p>
</li>
<li>
<p>由于<strong>不可能避免所有的碰撞</strong>，并且<strong>无线信道误码率较高</strong>，802.11 标准还使用了**数据链路层确认机制（停止-等待协议）**来保证数据被正确接收。</p>
</li>
<li>
<p>802.11 的 MAC 层标准定义了两种不同的媒体接入控制方式：</p>
<ul>
<li><strong>分布式协调功能 DCF</strong>。在 DCF 方式下，没有中心控制站点，每个站点使用 CSMA/CA 协议通过争用信道来获取发送权，这是 802.11 定义的默认方式。</li>
<li><strong>点协调功能 PCF</strong>。PCF 方式使用集中控制的接入算法（一般在接入点 AP 实现集中控制），是 802.11 定义的可选方式，在实际中较少使用。</li>
</ul>
</li>
<li>
<p>帧间间隔</p>
<ul>
<li>
<p>802.11 标准规定，所有的<strong>站点必须在持续检测到信道空闲一段指定时间后才能发送帧</strong>，这段时间称为帧间间隔 IFS。</p>
</li>
<li>
<p>帧间间隔的长短取决于该站点要发送的帧的类型：</p>
<ul>
<li>高优先级帧需要等待的时间较短，因此可优先获得发送权；</li>
<li>低优先级帧需要等待的时间较长。若某个站的低优先级帧还没来得及发送，而其他站的高优先级帧已发送到信道上，则信道变为忙态，因而低优先级帧就只能再推迟发送了。这样就减少了发生碰撞的机会。</li>
</ul>
</li>
<li>
<p>常用的两种帧间间隔如下：</p>
<ul>
<li>短帧间间隔 SIFS（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>28</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">28 \mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">2</span><span class="mord">8</span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span>），是最短的帧间间隔，用来分隔开属于一次对话的各帧。一个站点应当能够再这段时间内从发送方式切换到接收方式。使用 SIFS 的帧类型有 ACK 帧、CTS 帧、由过长的 MAC 帧分片后的数据帧、以及所有回答 AP 探询的帧和在 PCF 方式中接入点 AP 发送出的任何帧。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>DCF 帧间间隔 DIFS（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>128</mn><mi>μ</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">128\mu s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">8</span><span class="mord mathdefault">μ</span><span class="mord mathdefault">s</span></span></span></span>），它比短帧间间隔 SIFS 要长得多，在 DCF 方式中用来发送数据帧和管理帧。</p>
</li>
<li>
<p>CSMA/CA 协议的工作原理</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240627095650018.png" alt="image-20240627095650018"></p>
<ul>
<li>
<p>当站点检测到信道是空闲的，并且所发送的数据帧不是成功发送完上一个数据帧之后立即连续发送的数据帧，则不使用退避算法。</p>
</li>
<li>
<p>以下情况必须使用退避算法：</p>
<ul>
<li>在发送数据帧之前检测到信道处于忙状态时；</li>
<li>在每一次重传一个数据帧时；</li>
<li>在每一次成功发送后要连续发送下一个帧时（这是为了避免一个站点长时间占用信道）。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>CSMA/CA 协议的退避算法</p>
<ul>
<li>在执行退避算法时，站点为退避计时器设置一个随机的退避时间：
<ul>
<li>当退避计时器的时间减小到零时，就开始发送数据；</li>
<li>当退避计时器的时间还未减小到零时而信道又转变为忙状态，这时就冻结退避计时器的数值，重新等待信道变为空闲，在经过时间 DIFS 后，继续启动退避计时器。</li>
</ul>
</li>
<li>在进行第 i 次退避时，退避时间在时隙编号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msup><mn>2</mn><mrow><mn>2</mn><mo>+</mo><mi>i</mi></mrow></msup><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{0,1,...,2^{2+i}-1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0746639999999998em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.824664em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">+</span><span class="mord mathdefault mtight">i</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span> 中随机选择一个，然后乘以基本退避时间（也就是一个时隙的长度）就可以得到随机的退避时间。这样做是为了使不同站点选择相同退避时间的概率减少。当时隙编号达到 255 时（对应第 6 次退避）就不再增加了。</li>
</ul>
</li>
<li>
<p>CSMA/CA 协议的信道预约和虚拟载波监听</p>
<ul>
<li>
<p>为了<strong>尽可能减少碰撞的概率</strong>和降低碰撞的影响，802.11 标准允许要发送数据的站点<strong>对信道进行预约</strong>。</p>
<p>（1）源站在发送数据帧之前先发送一个短的控制帧，称为<strong>请求发送 RTS</strong>，它包括源地址、目的地址以及这次通信（包括相应的确认帧）所需的时间。</p>
<p>（2）若目的站正确收到源站发来的 RTS 帧，且媒体空闲，就发送一个相应控制帧，称为<strong>允许发送 CTS</strong>，它也包括这次通信所需的持续时间（从 RTS 帧中将此持续时间复制到 CTS 帧中）。</p>
<p>（3）源站收到 CTS 帧后，在等待一段时间 SIFS 后，就可发送其数据帧。</p>
<p>（4）若目的站正确收到了源站发来的数据帧，在等待时间 SIFS 后，就向源站发送确认帧 ACK。</p>
</li>
<li>
<p>除源站和目的站以外的<strong>其他各站</strong>，在<strong>收到 CTS 帧（或数据帧）后就推迟接入到无线局域网中</strong>。这样就保证了源站和目的站之间的通信不会受到其他站的干扰。</p>
</li>
<li>
<p>如果 RTS 帧发生碰撞，源站就收不到 CTS 帧，需执行退避算法重传 RTS 帧。</p>
</li>
<li>
<p>由于 RTS 帧和 CTS 帧很短，发送碰撞的概率、碰撞产生的概率、碰撞产生的开销以及本身的开销都很小。</p>
</li>
<li>
<p>除 RTS 帧和 CTS 帧会携带通信需要持续的时间，数据帧也能携带通信需要的持续的时间，这称为 802.11 的<strong>虚拟载波监听</strong>机制。</p>
</li>
<li>
<p>由于利用虚拟载波监听机制，<strong>站点只要监听到 RTS 帧、CTS 帧或数据帧中的任何一个，就能知道信道被占用的持续时间</strong>，而不需要真正监听到信道上的信号，因此<strong>虚拟载波监听机制能减少隐蔽站带来的碰撞问题</strong>。</p>
</li>
</ul>
</li>
</ul>
<h2 id="3-7-mac-地址-ip-地址以及-arp-协议">3.7 MAC 地址、IP 地址以及 ARP 协议</h2>
<ul>
<li>MAC 地址是以太网的 MAC 子层所使用的地址，属于数据链路层；</li>
<li>IP 地址是 TCP/IP 体系结构网际层所使用的地址；</li>
<li>ARP 协议属于 TCP/IP 体系结构的网际层，其作用是已知设备所分配到的 IP 地址，使用 ARP 协议可以通过该 IP 地址获取到设备的 MAC 地址；</li>
<li>尽管 IP 地址和 ARP 协议属于 TCP/IP 体系结构的网际层（而不属于数据链路层），但是它们与 MAC 地址存在一定的关系，并且我们日常的网络应用都离不开 MAC 地址、IP 地址以及 ARP 协议。因此，我们将这三者放在一起讨论。</li>
</ul>
<h3 id="一-mac-地址">一、MAC 地址</h3>
<ul>
<li>
<p>当多个主机连接在同一个广播信道上，要想实现两个主机之间的通信，则每个主机都必须有一个唯一的标识，即一个数据链路层地址；</p>
</li>
<li>
<p>在每一个主机发送的<strong>帧中必须携带标识发送主机和接受主机的地址</strong>。由于这类地址是用于媒体接入控制 MAC，因此这类地址被称为 <strong>MAC 地址</strong>。</p>
<ul>
<li>MAC 地址一般被固化在网卡（网络适配器）的电可擦编程只读存储器 EEPROM 中，因此 MAC 地址也被称为<strong>硬件地址</strong>；</li>
<li>MAC 地址有时也被称为<strong>物理地址</strong>。<strong>请注意：这并不意味着 MAC 地址属于网络体系结构中的物理层！</strong></li>
</ul>
</li>
<li>
<p>一般情况下，用户主机会包含两个网络适配器：有线局域网适配器（有线网卡）和无限局域网适配器（无线网卡）。每个网络适配器都有一个全球唯一的 MAC 地址。而交换机和路由器往往拥有更多的网络接口，所以会拥有更多的 MAC 地址。综上所述，<strong>严格来说，MAC 地址是对网络上各接口的唯一标识，而不是对网络上各设备的唯一标识</strong>。</p>
</li>
<li>
<p>IEEE 802 局域网的 MAC 地址格式</p>
</li>
</ul>
<table border=1>
    <thead align="center">
    	<tr>
            <th colspan=24>组织唯一标识符 OUI<br>（由 IEEE 的注册管理机构分配）</td>
            <th colspan=24>网络接口标识符<br>（由获得 OUI 的厂商自行随意分配）</td>
    	</tr>
    </thead>
    <tbody align="center">
		<tr>
            <td colspan=8>第一字节</td>
            <td colspan=8>第二字节</td>
            <td colspan=8>第三字节</td>
            <td colspan=8>第四字节</td>
            <td colspan=8>第五字节</td>
            <td colspan=8>第六字节</td>
        </tr>
        <tr>
        	<td>b7</td>
            <td>b6</td>
            <td>b5</td>
            <td>b4</td>
            <td>b3</td>
            <td>b2</td>
            <td>b1</td>
            <td>b0</td>
            <td>b7</td>
            <td>b6</td>
            <td>b5</td>
            <td>b4</td>
            <td>b3</td>
            <td>b2</td>
            <td>b1</td>
            <td>b0</td>
            <td>b7</td>
            <td>b6</td>
            <td>b5</td>
            <td>b4</td>
            <td>b3</td>
            <td>b2</td>
            <td>b1</td>
            <td>b0</td>
            <td>b7</td>
            <td>b6</td>
            <td>b5</td>
            <td>b4</td>
            <td>b3</td>
            <td>b2</td>
            <td>b1</td>
            <td>b0</td>
            <td>b7</td>
            <td>b6</td>
            <td>b5</td>
            <td>b4</td>
            <td>b3</td>
            <td>b2</td>
            <td>b1</td>
            <td>b0</td>
            <td>b7</td>
            <td>b6</td>
            <td>b5</td>
            <td>b4</td>
            <td>b3</td>
            <td>b2</td>
            <td>b1</td>
            <td>b0</td>
        </tr>
        <tr>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
            <td colspan=4>X</td>
        </tr>
	</tbody>
</table>
<p>​	标准表示法：XX-XX-XX-XX-XX-XX	例如：00-0C-CF-93-8C-92</p>
<p>​	其他表示法：XX:XX:XX:XX:XX:XX 	  例如：00:0C:CF:93:8C:92</p>
<p>​							 XXXX.XXXX.XXXX		  例如：000C.CF93.8C92</p>
<table border="1">
    <thead align="center">
        <tr>
        	<td>第一字节的 b1 位</td>
            <td>第一字节的 b0 位</td>
            <td>MAC 地址类型</td>
            <td>地址数量占比</td>
            <td>总地址数量</td>
        </tr>
    </thead>
    <tbody align="center">
    	<tr>
        	<td rowspan="2">0</td>
            <td>0</td>
            <td>全球管理 单播地址 厂商生产网络设备（网卡、交换机、路由器）时固化</td>
            <td>1/4</td>
            <td rowspan="4">2 的 48 次幂（二百八十多万亿）</td>
        </tr>
        <tr>
        	<td>1</td>
            <td>全球管理 多播地址 标准网络设备所支持的多播地址，用于特定功能</td>
            <td>1/4</td>
        </tr>
        <tr>
        	<td rowspan="2">1</td>
            <td>0</td>
            <td>本地管理 单播地址 由网络管理员分配，覆盖网络接口的全球管理单播地址</td>
            <td>1/4</td>
        </tr>
        <tr>
        	<td>1</td>
            <td>本地管理 多播地址 用户对主机进行软件配置，以表明其属于哪些多播组（注意：剩余 46 位全为 1 时，就是广播地址 FF-FF-FF-FF-FF-FF）</td>
            <td>1/4</td>
        </tr>
    </tbody>
</table>
<ul>
<li>
<p>对于使用 EUI-48 空间的应用程序，IEEE 的目标寿命为 100 年（直到 2080），但是鼓励采用 EUI-64 作为替代。</p>
</li>
<li>
<p>IEEE 802 局域网的 MAC 地址发送顺序</p>
<ul>
<li>字节发送顺序：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>第一字节</mtext><mo>→</mo><mtext>第六字节</mtext></mrow><annotation encoding="application/x-tex">第一字节\rightarrow第六字节</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">一</span><span class="mord cjk_fallback">字</span><span class="mord cjk_fallback">节</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">第</span><span class="mord cjk_fallback">六</span><span class="mord cjk_fallback">字</span><span class="mord cjk_fallback">节</span></span></span></span></li>
<li>字节内的比特发送顺序：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mn>0</mn></msub><mo>→</mo><msub><mi>b</mi><mn>7</mn></msub></mrow><annotation encoding="application/x-tex">b_0\rightarrow b_7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li>
</ul>
</li>
</ul>
<h3 id="二-ip-地址">二、IP 地址</h3>
<ul>
<li>
<p>IP 地址是因特网上的主机和路由器所使用的地址，用于标识两部分信息：</p>
<ul>
<li>网络编号：标识因特网上数以百万计的网络；</li>
<li>主机编号：标识同一网络上不同的主机（或路由器各接口）。</li>
</ul>
</li>
<li>
<p>很显然，之前介绍的 MAC 地址不具备区分不同网络的功能。</p>
<ul>
<li>如果只是一个单独的网络，不接入因特网，可以只使用 MAC 地址（这不是一般用户的应用方式）。</li>
<li>如果主机所在网络要接入因特网，则 IP 地址和 MAC 地址都需要使用。</li>
</ul>
</li>
<li>
<p>数据报转发过程中<strong>源 IP 地址和目的 IP 地址保持不变</strong>；</p>
</li>
<li>
<p>数据报转发过程中<strong>源 MAC 地址和目的 MAC 地址逐个链路（或逐个网络）改变</strong>。</p>
</li>
</ul>
<h3 id="三-arp-协议">三、ARP 协议</h3>
<ul>
<li>源主机在自己的 <strong>ARP 高速缓存表</strong>中查找目的主机的 IP 地址所对应的 MAC 地址，若找到了，则可以封装 MAC 帧进行发送；若找不到，则发送 <strong>ARP 请求（封装在广播 MAC 帧中）</strong>；</li>
<li>目的主机收到 ARP 请求后，将源主机的 IP 地址与 MAC 地址记录到自己的 ARP 高速缓存表中，然后给源主机发送 <strong>ARP 响应（封装在单播 MAC 帧中）</strong>，ARP 响应中包含有目的主机的 IP 地址和 MAC 地址；</li>
<li>源主机收到 ARP 响应后，将目的主机的 IP 地址与 MAC 地址记录到自己的 ARP 高速缓存表中，然后就可以封装之前想发送的 MAC 帧并发送给目的主机；</li>
<li><strong>ARP 的作用范围：逐段链路或逐个网络使用；</strong></li>
<li><strong>除 ARP 请求和响应外，ARP 还有其他类型的报文</strong>（例如用于检查 IP 地址冲突的“无故 ARP、免费 ARP”）；</li>
<li>ARP 没有安全验证机制，<strong>存在 ARP 欺骗（攻击）问题</strong>。</li>
</ul>
<h2 id="3-8-集线器与交换机的区别">3.8 集线器与交换机的区别</h2>
<ul>
<li>
<p>早期的总线型以太网</p>
<ul>
<li>主要使用粗、细同轴电缆，不可靠，已被淘汰。</li>
</ul>
</li>
<li>
<p>使用双绞线和集线器 HUB 的星型以太网</p>
<ul>
<li><strong>使用集线器的以太网在逻辑上仍是一个总线网</strong>，各站点共享总线资源，<strong>使用的还是 CSMA/CD 协议</strong>；</li>
<li><strong>集线器只工作在物理层</strong>，它的每个接口仅简单地转发比特，不进行碰撞检测（由各站的网卡检测）；</li>
<li><strong>集线器一般都有少量的容错能力和网络管理功能</strong>。例如，如网络中某个网卡出了故障，不停地发出帧。此时，集线器可以检测到这个问题，在内部断开与出故障网卡的连线，使整个以太网仍然能正常工作。</li>
</ul>
</li>
<li>
<p>使用集线器 HUB 在物理层扩展以太网。</p>
</li>
<li>
<p>以太网交换机</p>
<ul>
<li>以太网交换机通常都有<strong>多个接口</strong>。每个接口都可以直接与一台主机或另一个以太网交换机相连。一般都工作在<strong>全双工方式</strong>。</li>
<li>以太网交换机具有并行性，能<strong>同时连通多对接口</strong>，使多对主机能同时通信，<strong>无碰撞（不使用 CSMA/CD 协议）</strong>。</li>
<li>以太网交换机一般都具有多种速率的接口，例如：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mi>M</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mtext>、</mtext><mn>100</mn><mi>M</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mtext>、</mtext><mn>1</mn><mi>G</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi><mtext>、</mtext><mn>10</mn><mi>G</mi><mi>b</mi><mi mathvariant="normal">/</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">10Mb/s、100Mb/s、1Gb/s、10Gb/s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">、</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">、</span><span class="mord">1</span><span class="mord mathdefault">G</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord cjk_fallback">、</span><span class="mord">1</span><span class="mord">0</span><span class="mord mathdefault">G</span><span class="mord mathdefault">b</span><span class="mord">/</span><span class="mord mathdefault">s</span></span></span></span> 接口的多种组合。</li>
<li>以太网交换机<strong>工作在数据链路层</strong>（也包括物理层），它收到帧后，在帧交换表中查找<strong>帧的目的 MAC 地址所对应的接口号</strong>，然后通过该接口转发帧。</li>
<li>以太网交换机是一种即插即用设备，其内部的<strong>帧交换表</strong>是通过<strong>自学习算法</strong>自动地逐渐建立起来的。</li>
<li>帧的两种转发方式：
<ul>
<li><strong>存储转发</strong></li>
<li><strong>直通交换</strong>：采用基于硬件的交叉矩阵（交换时延非常小，但不检查帧是否有差错）</li>
</ul>
</li>
</ul>
</li>
<li>
<p>集线器与交换机的对比：</p>
<ul>
<li>集线器 HUB
<ul>
<li>早期以太网的互连设备；</li>
<li>工作在 OSI 体系结构的物理层；</li>
<li>对接收到的信号进行放大、转发；</li>
<li>使用集线器作为互连设备的以太网仍然属于共享总线式以太网。集线器互连起来的所有主机共享总线带宽，属于同一个碰撞域和广播域。</li>
</ul>
</li>
<li>交换机 SWITCH
<ul>
<li>目前以太网中使用最广泛的互连设备；</li>
<li>工作在 OSI 体系结构的数据链路层（也包括物理层）；</li>
<li>根据 MAC 地址对帧进行转发；</li>
<li>使用交换机作为互连设备的以太网，称为交换式以太网。交换机可以根据 MAC 地址过滤帧，即隔离碰撞域；</li>
<li>交换机的每个接口是一个独立的碰撞域；</li>
<li>交换机隔离碰撞域但不隔离广播域（VLAN 除外）。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-9-以太网交换机自学习和转发帧的流程">3.9 以太网交换机自学习和转发帧的流程</h2>
<ul>
<li>
<p>以太网交换机工作在<strong>数据链路层</strong>（也包括物理层）。</p>
</li>
<li>
<p>以太网交换机收到帧后，在帧交换表中查找<strong>帧的目的 MAC 地址所对应的接口号</strong>，然后通过该接口转发帧。</p>
</li>
<li>
<p>以太网交换机是一种即插即用设备，刚上电启动时其内部的帧交换表是空的。随着网络中各主机间的通信，以太网交换机<strong>通过自学习算法</strong>自动逐渐<strong>建立起帧交换表</strong>。</p>
</li>
<li>
<p>以太网交换机自学习和转发帧的流程：</p>
<ol>
<li>收到帧后进行<strong>登记</strong>。登记的内容为<strong>帧的源 MAC 地址</strong>及进入交换机的<strong>端口号</strong>；</li>
<li>根据<strong>帧的目的 MAC 地址</strong>和交换机的<strong>帧交换表</strong>对帧进行<strong>转发</strong>，有以下三种情况：
<ul>
<li><strong>明确转发</strong>：交换机知道应当从哪个（或哪些）端口转发该帧（单播，多播，广播）。</li>
<li><strong>盲目转发</strong>：交换机不知道应当从哪个端口转发帧，只能将其通过除进入交换机的接口外的其他所有接口转发（也称为泛洪）。</li>
<li><strong>明确丢弃</strong>：交换机知道不应该转发该帧，将其丢弃。</li>
</ul>
</li>
</ol>
</li>
<li>
<p>帧交换表中的每条记录都有自己的<strong>有效时间</strong>，到期删除。原因如下：</p>
<ul>
<li>交换机的接口改接了另一台主机；</li>
<li>主机更换了网卡。</li>
</ul>
</li>
</ul>
<h2 id="3-10-以太网交换机的生成树协议-stp">3.10 以太网交换机的生成树协议 STP</h2>
<ul>
<li>如何提高以太网的可靠性？</li>
<li>添加<strong>冗余链路</strong>可以提高以太网的可靠性</li>
<li>但是，冗余链路也会带来负面效应——形成<strong>网络环路</strong></li>
<li>网络环路会带来以下问题：
<ul>
<li><strong>广播风暴</strong>
<ul>
<li>大量消耗网络资源，使得网络无法正常转发其他数据帧；</li>
</ul>
</li>
<li><strong>主机收到重复的广播帧</strong>
<ul>
<li>大量消耗主机资源</li>
</ul>
</li>
<li><strong>交换机的帧交换表震荡（漂移）</strong></li>
</ul>
</li>
<li>以太网交换机使用<strong>生成树协议 STP</strong>，可以在增加冗余链路来提高网络可靠性的同时又<strong>避免网络环路带来的各种问题</strong>。
<ul>
<li>不论交换机之间采用怎样的物理连接，交换机都能够<strong>自动计算并构建一个逻辑上没有环路的网络</strong>，其逻辑拓扑结构必须是树型的（无逻辑环路）；</li>
<li>最终生成的树型逻辑拓扑要<strong>确保连通整个网络</strong>；</li>
<li>当首次连接交换机或网络<strong>物理拓扑发送变化</strong>时（有可能是人为改变或故障），交换机都将进行<strong>生成树的重新计算</strong>。</li>
</ul>
</li>
</ul>
<h2 id="3-11-虚拟局域网-vlan">3.11 虚拟局域网 VLAN</h2>
<h3 id="一-概述">一、概述</h3>
<ul>
<li>
<p>以太网交换机工作在<strong>数据链路层</strong>（也包括物理层）</p>
</li>
<li>
<p>使用一个或多个以太网交换机互连起来的交换式以太网，其所有站点都属于<strong>同一个广播域</strong>。</p>
</li>
<li>
<p>随着交换式以太网规模的扩大，广播域相应扩大。</p>
</li>
<li>
<p>巨大的广播域会带来很多<strong>弊端</strong>：</p>
<ul>
<li><strong>广播风暴</strong></li>
<li>难以管理和维护</li>
<li>潜在的安全问题</li>
</ul>
</li>
<li>
<p><strong>网络中会频繁出现广播信息</strong>（TCP/IP 协议栈中很多协议都会使用广播，例如 ARP, RIP, DHCP等）</p>
</li>
<li>
<p>分割广播域的方法：使用路由器可以隔离广播域，但路由器成本较高，<strong>虚拟局域网 VLAN 技术</strong>应运而生。</p>
</li>
<li>
<p>虚拟局域网 VLAN 是一种将局域网内的<strong>设备划分成与物理位置无关的逻辑组的技术，这些逻辑组具有某些共同的需求</strong>。</p>
</li>
</ul>
<h3 id="二-实现机制">二、实现机制</h3>
<ul>
<li>
<p>IEEE 802.1 Q 帧</p>
<ul>
<li>IEEE 802.1 Q 帧对以太网的 MAC 帧格式进行了扩展，插入了 4 字节的 VLAN 标记。</li>
<li>VLAN 标记的<strong>最后 12 比特</strong>称为 <strong>VLAN 标识符 VID</strong>，它唯一地标志了以太网帧属于哪一个 VLAN。
<ul>
<li>VID 的取值范围是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>∼</mo><mn>4095</mn><mtext>（</mtext><mn>0</mn><mo>∼</mo><msup><mn>2</mn><mn>12</mn></msup><mo>−</mo><mn>1</mn><mtext>）</mtext></mrow><annotation encoding="application/x-tex">0\sim4095（0\sim2^{12}-1）</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mord">9</span><span class="mord">5</span><span class="mord cjk_fallback">（</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord cjk_fallback">）</span></span></span></span></li>
<li>0 和 4095 都不用来表示 VLAN，因此用于表示 VLAN 的 <strong>VID 的有效取值范围是 1 ~ 4094</strong>。</li>
</ul>
</li>
<li><strong>802.1 Q 帧是由交换机来处理的，而不是用户主机来处理的</strong>。
<ul>
<li>当交换机收到<strong>普通的以太网帧</strong>时，会将其插入 4 字节的 VLAN 标记转变为 802.1 Q 帧，简称”<strong>打标签</strong>“。</li>
<li>当交换机<strong>转发 802.1 Q 帧</strong>时，<strong>可能</strong>会删除其 4 字节 VLAN 标记转变为普通的以太网帧，简称“<strong>去标签</strong>”。</li>
</ul>
</li>
</ul>
</li>
<li>
<p>交换机的端口类型</p>
<ul>
<li>Access
<ul>
<li>连接用户计算机</li>
<li>只能属于一个 VLAN</li>
<li>PVID 与端口所属 VLAN 的 ID 相同，默认值为 1</li>
<li>接受处理方法
<ul>
<li>一般只接受未打标签的普通以太网帧，并给其打标签</li>
</ul>
</li>
<li>发送处理方法
<ul>
<li>若帧中的 VID 等于端口 PVID，则去掉标签并转发；否则丢弃</li>
</ul>
</li>
</ul>
</li>
<li>Trunk
<ul>
<li>交换机之间或交换机与路由器之间的连接</li>
<li>可以属于多个 VLAN</li>
<li>用户可以设置 PVID，默认为 1</li>
<li>接受处理方法
<ul>
<li>接收已打标签的帧；</li>
<li>接受未打标签的帧，根据端口的 PVID 给帧打标签</li>
</ul>
</li>
<li>发送处理方法
<ul>
<li>帧中 VID 等于端口 PVID，去掉标签再转发；</li>
<li>帧中 VID 不等于端口 PVID，直接转发</li>
</ul>
</li>
</ul>
</li>
<li>Hybrid
<ul>
<li>交换机之间、交换机与路由器、交换机与用户计算机之间的连接</li>
<li>可以属于多个 VLAN</li>
<li>用户可以在设置 PVID，默认为 1</li>
<li>接受处理方法
<ul>
<li>接收已打标签的帧；</li>
<li>接受未打标签的帧，根据端口的 PVID 值给帧打标签</li>
</ul>
</li>
<li>发送处理方法
<ul>
<li>查看数据帧中的 VID 是否在端口的“去标签”列表中：如果存在，则去掉标签再转发；如果不存在，则直接转发</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="第四章-网络层">第四章 网络层</h1>
<h2 id="4-1-网络层概述">4.1 网络层概述</h2>
<ul>
<li>网络层的主要任务是<strong>实现网络互连</strong>，进而<strong>实现数据包在各网络之间的传输</strong>。</li>
<li>要实现网络层任务，需要解决以下主要问题：
<ul>
<li><strong>网络层向运输层提供怎样的服务</strong>（“可靠传输”还是“不可靠传输”）</li>
<li><strong>网络层寻址问题</strong></li>
<li><strong>路由选择问题</strong></li>
</ul>
</li>
<li><strong>因特网</strong>是目前全世界用户数量最多的互联网，它<strong>使用 TCP/IP 协议栈</strong>。</li>
<li>由于 TCP/IP 协议栈的网络层使用<strong>网际协议 IP</strong>，它是整个协议栈的核心协议，因此在 TCP/IP 协议栈中网络层常称为<strong>网际层</strong>。</li>
<li>综上所述，我们通过学习 TCP/IP 协议栈的网际层来学习网络层的理论知识和实践技术。</li>
</ul>
<h2 id="4-2-网络层提供的两种服务">4.2 网络层提供的两种服务</h2>
<table border="1">
    <thead align="center">
    	<tr>
        	<td colspan="3">
            	虚电路服务与数据报服务的比较
            </td>
        </tr>
        <tr>
        	<td>对比方面</td>
            <td>虚电路服务</td>
            <td>数据报服务</td>
        </tr>
    </thead>
    <tbody>
    	<tr>
        	<td>思路</td>
            <td>可靠通信应当由网络来保证</td>
            <td>可靠通信应当由用户主机来保证</td>
        </tr>
        <tr>
        	<td>连接的建立</td>
            <td>必须建立网络层连接</td>
            <td>不需要建立网络层连接</td>
        </tr>
        <tr>
        	<td>终点地址</td>
            <td>仅在连接建立阶段使用，每个分组使用短的虚电路号</td>
            <td>每个分组都有终点的完整地址</td>
        </tr>
        <tr>
        	<td>分组的转发</td>
            <td>属于同一条虚电路的分组均按照同一路由进行转发</td>
            <td>每个分组可走不同的路由</td>
        </tr>
        <tr>
        	<td>当结点出故障时</td>
            <td>所有通过出故障的结点的虚电路均不能工作</td>
            <td>出故障的结点可能会丢失分组，一些路由可能会发生变化</td>
        </tr>
        <tr>
        	<td>分组的顺序</td>
            <td>总是按发送顺序到达终点</td>
            <td>到达终点时不一定按发送顺序</td>
        </tr>
        <tr>
        	<td>服务质量保证</td>
            <td>可以将通信资源提前分配给每一个虚电路，容易实现</td>
            <td>很难实现</td>
        </tr>
    </tbody>
</table>
<h2 id="4-3-ipv4-地址">4.3 IPv4 地址</h2>
<h3 id="一-概述">一、概述</h3>
<ul>
<li><strong>IPv4 地址</strong>就是给因特网上的<strong>每一台主机（或路由器）的每一个接口</strong>分配一个在全世界范围内是<strong>唯一的 32 比特的标识符</strong>。</li>
<li>IPv4 地址的编制方法经历了以下三个历史阶段：
<ul>
<li>分类编址——1981</li>
<li>划分子网——1985</li>
<li>无分类编址——1993</li>
</ul>
</li>
<li>32 比特的 IPv4 地址不方便阅读、记录以及输入等，因此 IPv4 地址采用<strong>点分十进制表示方法</strong>以方便用户使用。</li>
</ul>
<h3 id="二-分类编址的-ipv4-地址">二、分类编址的 IPv4 地址</h3>
<p>共有 5 类地址，分别为 A, B, C, D, E，其中，D 类地址为多播地址，E 类地址保留为今后使用。</p>
<p>注：</p>
<ul>
<li>只有 A 类、B 类、C 类地址可分配给网络中的主机或路由器的各接口</li>
<li>主机号为“全 0”的地址是网络地址，不能分配给主机或路由器的各接口</li>
<li>主机号为“全 1”的地址是广播地址，不能分配给主机或路由器的各接口</li>
</ul>
<ol>
<li>
<p>A 类地址</p>
<p>网络号：8 位（最高位为 0）；主机号：24 位。</p>
<ul>
<li>最小网络号 0，保留不指派；</li>
<li>第一个可指派的网络号为 1，网络地址为 1.0.0.0；</li>
<li>最大网络号 127，作为本地环回测试地址，不指派
<ul>
<li>最小的本地环回测试地址为 127.0.0.1</li>
<li>最大的本地环回测试地址为 127.255.255.254</li>
</ul>
</li>
<li>最后一个可指派的网络号为 126，网络地址为 126.0.0.0</li>
<li>可指派的网络数量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mn>8</mn><mo>−</mo><mn>1</mn></mrow></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>126</mn></mrow><annotation encoding="application/x-tex">2^{8-1}-2=126</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">6</span></span></span></span>（减 2 的原因是除去最小网络号 0 和最大网络号 127）</li>
<li>每个网络中可分配的 IP 地址数量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>24</mn></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>16777214</mn></mrow><annotation encoding="application/x-tex">2^{24}-2=16777214</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">4</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">7</span><span class="mord">7</span><span class="mord">7</span><span class="mord">2</span><span class="mord">1</span><span class="mord">4</span></span></span></span>（减 2 的原因是出去主机号全为 0 的网络地址和全 1 的广播地址）</li>
</ul>
</li>
<li>
<p>B 类地址</p>
<p>网络号：16 位（最高两位为 10）；主机号：16 位。</p>
<ul>
<li>最小网络号也是第一个可指派的网络号 128.0，网络地址为 128.0.0.0</li>
<li>最大网络号也是最后一个可指派的网络号 191.255，网络地址为 191.255.0.0</li>
<li>可指派的网络数量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mn>16</mn><mo>−</mo><mn>2</mn></mrow></msup><mo>=</mo><mn>16384</mn></mrow><annotation encoding="application/x-tex">2^{16-2}=16384</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span><span class="mbin mtight">−</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span><span class="mord">3</span><span class="mord">8</span><span class="mord">4</span></span></span></span></li>
<li>每个网络中可分配的 IP 地址数量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>16</mn></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>65534</mn></mrow><annotation encoding="application/x-tex">2^{16}-2=65534</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">6</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">5</span><span class="mord">5</span><span class="mord">3</span><span class="mord">4</span></span></span></span>（减 2 的原因是除去主机号全为 0 的网络地址和全 1 的广播地址）</li>
</ul>
</li>
<li>
<p>C 类地址</p>
<p>网络号：24 位（最高三位为 110）；主机号：8 位。</p>
<ul>
<li>最小网络号也是第一个可指派的网络号 192.0.0，网络地址为 192.0.0.0</li>
<li>最大网络号也是最后一个可指派的网络号 223.255.255，网络地址为 223.255.255.0</li>
<li>可指派的网络数量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mn>24</mn><mo>−</mo><mn>3</mn></mrow></msup><mo>=</mo><mn>2097152</mn></mrow><annotation encoding="application/x-tex">2^{24-3}=2097152</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">4</span><span class="mbin mtight">−</span><span class="mord mtight">3</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">9</span><span class="mord">7</span><span class="mord">1</span><span class="mord">5</span><span class="mord">2</span></span></span></span></li>
<li>每个网络中可分配的 IP 地址数量为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>8</mn></msup><mo>−</mo><mn>2</mn><mo>=</mo><mn>254</mn></mrow><annotation encoding="application/x-tex">2^8-2=254</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span><span class="mord">4</span></span></span></span></li>
</ul>
</li>
</ol>
<ul>
<li>
<p>一般不使用的特殊 IP 地址</p>
<table>
<thead>
<tr>
<th>网络号</th>
<th>主机号</th>
<th>作为源地址</th>
<th>作为目的地址</th>
<th>代表的意思</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>可以</td>
<td>不可</td>
<td>在本网络上的本主机（DHCP 协议）</td>
</tr>
<tr>
<td>0</td>
<td>host-id</td>
<td>可以</td>
<td>不可</td>
<td>在本网络上的某台主机 host-id</td>
</tr>
<tr>
<td>全1</td>
<td>全1</td>
<td>不可</td>
<td>可以</td>
<td>只在本网络上进行广播（各路由器均不转发）</td>
</tr>
<tr>
<td>net-id</td>
<td>全1</td>
<td>不可</td>
<td>可以</td>
<td>对 net-id 上的所有主机进行广播</td>
</tr>
<tr>
<td>127</td>
<td>非全0或全1</td>
<td>可以</td>
<td>可以</td>
<td>用于本地软件环回测试地址</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>​</p>
<h3 id="三-划分子网的-ipv4-地址">三、划分子网的 IPv4 地址</h3>
<ul>
<li>为新增网络申请新的网络号会带来以下弊端：
<ul>
<li>需要等待时间和花费更多的费用</li>
<li>会增加其他路由器中路由表记录的数量</li>
<li>浪费原有网络号中剩余的大量 IP 地址</li>
</ul>
</li>
<li>可以从主机号部分借用一部分比特作为子网号</li>
<li><strong>32 比特的子网掩码可以表明分类 IP 地址的主机号部分被借用了几个比特作为子网号</strong>
<ul>
<li>子网掩码使用<strong>连续的比特 1 来对应网络号和子网号</strong></li>
<li>子网掩码使用<strong>连续的比特 0 来对应主机号</strong></li>
<li>将划分子网的 <strong>IPv4 地址</strong>与其相应的<strong>子网掩码</strong>进行<strong>逻辑与运算</strong>就可得到 IPv4 地址<strong>所在子网的网络地址</strong></li>
</ul>
</li>
<li>给定一个分类的 IP 地址和其相应的子网掩码，就可知道子网划分的细节：
<ul>
<li>划分出的子网数量</li>
<li>每个子网可分配的 IP 地址数量</li>
<li>每个子网的网络地址和广播地址</li>
<li>每个子网可分配的最小和最大地址</li>
</ul>
</li>
<li><strong>默认的子网掩码是指在未划分子网的情况下使用的子网掩码</strong>。
<ul>
<li>A 类：255.0.0.0</li>
<li>B 类：255.255.0.0</li>
<li>C 类：255.255.255.0</li>
</ul>
</li>
</ul>
<h3 id="四-无分类编址的-ipv4-地址">四、无分类编址的 IPv4 地址</h3>
<ul>
<li>划分子网在一定程度上缓解了因特网在发展中遇到的困难，但是<strong>数量巨大的 C 类网</strong>因为其<strong>地址空间太小</strong>并<strong>没有得到充分使用</strong>，而因特网的 IP 地址仍在加速消耗，整个 <strong>IPv4 地址空间面临全部耗尽的威胁</strong>。</li>
<li>为此，因特网工程任务组 IETF 又提出了采用<strong>无分类编址</strong>的方法来解决 IP 地址紧张的问题，同时还专门成立 IPv6 工作组负责研究新版本 IP 以彻底解决 IP 地址耗尽问题。</li>
<li>1993 年，IETF 发布了<strong>无分类域间路由选择 CIDR</strong> 的 RFC 文档：
<ul>
<li><strong>CIDR 消除了传统的 A 类、B 类和 C 类地址，以及划分子网的概念</strong>；</li>
<li><strong>CIDR 可以更加有效地分配 IPv4 的地址空间</strong>，并且可以在新的 IPv6 使用之前允许因特网的规模继续增长。</li>
</ul>
</li>
<li>CIDR 使用”<strong>斜线记法</strong>“，或称 CIDR 记法。即在 IPv4 地址后面加上斜线”/“，在<strong>斜线后面写上网络前缀所占的比特数量</strong>。</li>
<li>CIDR 实际上是<strong>将网络前缀都相同的连续 IP 地址组成一个”CIDR 地址块“</strong>。</li>
<li>我们<strong>只要知道 CIDR 地址块中的任何一个地址，就可以知道该地址块的全部细节</strong>：
<ul>
<li>地址块的最小地址；</li>
<li>地址块的最大地址；</li>
<li>地址块中的地址数量；</li>
<li>地址块聚合某类网络（A 类、B 类或 C 类）的数量；</li>
<li>地址掩码（子网掩码）。</li>
</ul>
</li>
<li><strong>路由聚合</strong>（构造超网）的方法是<strong>找共同前缀</strong></li>
<li><strong>网络前缀越长，地址块越小，路由越具体</strong>；</li>
<li>若路由器查表转发分组时发现有多条路由可选，则选择网络前缀最长的那条，这称为<strong>最长前缀匹配</strong>，因为这样的路由更具体。</li>
</ul>
<h3 id="五-ipv4-地址的应用规划">五、IPv4 地址的应用规划</h3>
<ul>
<li>定长的子网掩码 FLSM
<ul>
<li>使用同一个子网掩码来划分子网</li>
<li>子网划分方式不灵活：只能划分出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">2^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.664392em;vertical-align:0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span></span></span> 个子网（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> 是从主机号部分借用的用来作为子网号的比特数量）</li>
<li>每个子网所分配的 IP 地址数量相同，容易造成 IP 地址浪费。</li>
</ul>
</li>
<li>变长的子网掩码 VLSM
<ul>
<li>使用不同的子网掩码来划分子网</li>
<li>子网划分方式灵活：可以按需分配</li>
<li>每个子网所分配的 IP 地址数量可以不同，尽可能减少对 IP 地址的浪费。</li>
</ul>
</li>
</ul>
<h2 id="4-4-ip-数据报的发送和转发过程">4.4 IP 数据报的发送和转发过程</h2>
<ul>
<li>主机发送 IP 数据报
<ul>
<li><strong>判断目的主机是否与自己在同一个网络</strong>：
<ul>
<li>若<strong>在同一个网络</strong>，则属于<strong>直接交付</strong>；</li>
<li>若<strong>不在同一个网络</strong>，则属于<strong>间接交付</strong>，传输给主机所在网络的<strong>默认网关</strong>（路由器），由默认网关帮忙转发；</li>
</ul>
</li>
</ul>
</li>
<li>路由器转发 IP 数据报
<ol>
<li><strong>检查 IP 数据报首部是否出错</strong>：
<ul>
<li>若出错，则直接丢弃该 IP 数据报并通告源主机；</li>
<li>若没有出错，则进行转发；</li>
</ul>
</li>
<li><strong>根据 IP 数据报的目的地址在路由表中查找匹配的条目</strong>：
<ul>
<li>若找到匹配的条目，则转发给条目中指示的下一跳；</li>
<li>若找不到，则丢弃该 IP 数据报并通告源主机。</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="4-5-静态路由配置及其可能产生的路由环路问题">4.5 静态路由配置及其可能产生的路由环路问题</h2>
<ul>
<li>静态路由配置是指用户或网络管理员使用路由器的相关命令给路由器<strong>人工配置路由表</strong>。
<ul>
<li>这种人工配置方式简单、开销小。但<strong>不能及时适应网络状态（流量、拓扑等）的变化</strong>。</li>
<li>一般只在小规模网络中采用。</li>
</ul>
</li>
<li>使用静态路由配置可能出现以下<strong>导致</strong>产生<strong>路由环路</strong>的错误
<ul>
<li>配置错误</li>
<li>聚合了不存在的网络</li>
<li>网络故障</li>
</ul>
</li>
<li>路由条目的类型
<ul>
<li>直连网络</li>
<li>静态路由（人工配置）</li>
<li>动态路由（路由选择协议）</li>
</ul>
</li>
<li>特殊的静态路由条目
<ul>
<li>默认路由（目的网络为 0.0.0.0，地址掩码为 0.0.0.0）</li>
<li>特定主机路由（目的网络为特定主机的 IP 地址，地址掩码为 255.255.255.255）</li>
<li>黑洞路由（下一跳为 null0）</li>
</ul>
</li>
</ul>
<h2 id="4-6-路由选择协议">4.6 路由选择协议</h2>
<h3 id="一-概述">一、概述</h3>
<table>
<thead>
<tr>
<th>静态路由选择</th>
<th>动态路由选择</th>
</tr>
</thead>
<tbody>
<tr>
<td>由<strong>人工配置</strong>的网络路由、默认路由、特定主机路由、黑洞路由等都属于静态路由。</td>
<td>路由器通过路由选择协议<strong>自动获取路由信息</strong>。</td>
</tr>
<tr>
<td>这种人工配置方式简单、开销小。但<strong>不能及时适应网络状态（流量、拓扑等）的变化</strong>。</td>
<td>比较复杂、开销比较大。<strong>能较好地适应网络状态的变化</strong>。</td>
</tr>
<tr>
<td>一般只在<strong>小规模网络</strong>中采用。</td>
<td>适用于<strong>大规模网络</strong>。</td>
</tr>
</tbody>
</table>
<ul>
<li>因特网采用分层次的路由选择协议。</li>
<li>路由选择协议
<ul>
<li>内部网关协议 IGP
<ul>
<li>路由信息协议 RIP</li>
<li>内部网关路由协议 IGPR</li>
<li>增强型内部网关路由协议 EIGRP</li>
<li>开放式最短路径优先 OSPF</li>
<li>中间系统到中间系统 IS-IS</li>
</ul>
</li>
<li>外部网关协议 EGP
<ul>
<li>边界网关协议 BGP</li>
</ul>
</li>
</ul>
</li>
<li>基于<strong>路径向量</strong>
<ul>
<li>RIP 在因特网上最早使用</li>
<li>IGRP 是思科早期私有协议，现在已被 EIGRP 取代</li>
</ul>
</li>
<li>EIGRP：思科私有的，用来取代 IGRP 的混合型路由协议（结合距离向量和链路状态）</li>
<li>基于<strong>链路状态</strong>
<ul>
<li>OSPF 在各种网络中广泛使用</li>
<li>集成化 IS-IS 是 ISP 骨干网上最常使用的 IGP 协议</li>
</ul>
</li>
<li>路由器的结构
<ul>
<li>路由表
<ul>
<li>路由表一般仅包含从目的网络到下一跳的映射</li>
<li>路由表需要对网络拓扑变化的计算最优化</li>
</ul>
</li>
<li>转发表
<ul>
<li>转发表是从路由表得出的</li>
<li>转发表的结构应当使查找过程最优化</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="二-路由信息协议-rip-的基本工作原理">二、路由信息协议 RIP 的基本工作原理</h3>
<ul>
<li><strong>路由信息协议 RIP</strong> 是内部网关协议 IGP 中最先得到广泛使用的协议之一。</li>
<li>RIP 要求自治系统 AS 内的每一个路由器都要维护从它自己到 AS 内其它每一个网络的距离记录。这是一组距离，称为”<strong>距离向量</strong>“。</li>
<li>RIP 使用<strong>跳数</strong>作为度量<strong>来衡量到达目的网络的距离</strong>。
<ul>
<li>路由器到直连网络的距离定位 1.</li>
<li>路由器到非直连网络的距离定义为所经过的路由器数加 1.</li>
<li>允许一条路径最多只能包含 15 个路由器。<strong>”距离“等于 16 时相当于不可达</strong>。因此，<strong>RIP 只适用于小型互联网</strong>。</li>
</ul>
</li>
<li>RIP 认为<strong>好的路由</strong>就是”距离短“的路由，也就是<strong>所通过路由器数量最少的路由</strong>。</li>
<li>当到达同一目的网络有多条”距离相等“的路由时，可以进行<strong>等价负载均衡</strong>。</li>
<li>RIP 包含以下三个要点：
<ul>
<li><strong>和谁交换信息</strong>：仅和<strong>相邻路由器</strong>交换信息</li>
<li><strong>交换什么信息</strong>：自己的<strong>路由表</strong></li>
<li><strong>何时交换信息</strong>：<strong>周期性交换</strong>（例如每 30 秒）</li>
</ul>
</li>
<li><strong>RIP 的基本工作过程</strong>
<ol>
<li>路由器刚开始工作时，只知道自己到直连网络的距离为 1.</li>
<li>每个路由器仅和相邻路由器周期性地交换并更新路由信息。</li>
<li>若干次交换和更新后，每个路由器都知道到达本 AS 内各网络的最短距离和下一跳地址，称为收敛。</li>
</ol>
</li>
<li><strong>RIP 的路由条目的更新规则</strong>
<ul>
<li>发现了新的网络，添加</li>
<li>到达目的网络，不同下一跳，新路由优势，更新</li>
<li>到达目的网络，不同下一跳，等价负载均衡</li>
<li>到达目的网络，相同下一跳，最新消息，更新</li>
<li>到达目的网络，不同下一跳，新路由劣势，不更新</li>
</ul>
</li>
<li>RIP 存在”<strong>坏消息传播得慢</strong>“的问题</li>
<li>”坏消息传播得慢“又称为<strong>路由环路</strong>或<strong>距离无穷计数</strong>问题，这是<strong>距离向量算法的一个固有问题</strong>。可以采取多种措施<strong>减少</strong>出现该问题的概率或减小该问题带来的危害。
<ul>
<li><strong>限制最大路径距离</strong>为 15（16 表示不可达）</li>
<li>当路由表发生变化时就立即发送更新报文（即”<strong>触发更新</strong>“），而不仅是周期性发送</li>
<li>让路由器记录收到某特定路由信息的接口，而不让同一路由信息再通过此接口向反方向传送（即”<strong>水平分割</strong>“）</li>
</ul>
</li>
</ul>
<h3 id="三-开放最短路径优先-ospf-的基本工作原理">三、开放最短路径优先 OSPF 的基本工作原理</h3>
<ul>
<li>开放最短路径优先 OSPF 是为克服 RIP 的缺点在 1989 年开发出来的。
<ul>
<li>”开放“表明 OSPF 协议不是受某一家厂商控制，而是<strong>公开发表</strong>的。</li>
<li>”最短路径优先“是因为使用了 Dijkstra 提出的<strong>最短路径算法</strong> SPF。</li>
</ul>
</li>
<li>OSPF 是<strong>基于链路状态</strong>的，而不像 RIP 那样是基于距离向量的。</li>
<li>OSPF <strong>不限制网络规模</strong>，更新效率高，<strong>收敛速度快</strong>。</li>
<li>链路状态是指本路由器都<strong>和哪些路由器相邻</strong>，以及相应<strong>链路的”代价“</strong>（cost）。
<ul>
<li>”代价“用来表示费用、距离、时延、带宽，等等。这些都由网络管理人员来决定。</li>
</ul>
</li>
<li>使用 OSPF 的每个路由器都会产生<strong>链路状态通告 LSA</strong>。LSA 中包含以下内容：
<ul>
<li>直连网络的链路状态信息</li>
<li>邻居路由器的链路状态信息</li>
</ul>
</li>
<li>LSA 被封装在<strong>链路状态更新分组 LSU</strong> 中，采用<strong>洪泛</strong>法发送。</li>
<li>使用 OSPF 的每个路由器都有一个<strong>链路状态数据库 LSDB</strong>，用于存储 LSA。</li>
<li>通过各路由器洪泛发送封装有自己 LSA 的 LSU 分组，各路由器的 LSDB 最终将达到一致。</li>
<li>使用 OSPF 的各路由器<strong>基于 LSDB 进行最短路径优先 SPF 计算</strong>，构建出各自到达其他各路由器的最短路径，即构建各自的路由表。</li>
<li>OSPF 有以下五种分组类型
<ul>
<li>问候分组</li>
<li>数据库描述分组</li>
<li><strong>链路状态请求</strong>分组</li>
<li><strong>链路状态更新</strong>分组</li>
<li><strong>链路状态确认</strong>分组</li>
</ul>
</li>
<li>OSPF 在多点接入网络中路由器邻居关系的建立
<ul>
<li>选举<strong>指定路由器 DR</strong> 和<strong>备用的指定路由器 BDR</strong></li>
<li><strong>所有的非 DR/BDR 只与 DR/BDR 建立邻居关系</strong></li>
<li>非 DR/BDR 之间通过 DR/BDR 交换信息</li>
</ul>
</li>
<li>为了使 OSPF 能够用于规模很大的网络，OSPF 把一个自治系统再划分为若干个更小的范围，叫做<strong>区域</strong>。
<ul>
<li>划分区域的好处就是<strong>把利用洪泛法交换链路状态体信息的范围局限于每一个区域而不是整个自治系统</strong>，这就减少了整个网络上的通信量。</li>
</ul>
</li>
</ul>
<h3 id="四-边界网关协议-bgp-的基本工作原理">四、边界网关协议 BGP 的基本工作原理</h3>
<ul>
<li>外部网关协议 EGP（例如边界网关协议 BGP）
<ul>
<li>在不同自治系统内，度量路由的”代价“（距离，带宽，费用等）可能不同。因此，对于自治系统之间的路由选择，使用”代价&quot;作为度量来寻找最佳路由是不行的。</li>
<li>自治系统之间的路由选择必须考虑相关策略（政治，经济，安全等）</li>
<li>BGP 只能是力求寻找一条能够到达目的网络且比较好的路由（不能兜圈子），而并非要寻找一条最佳路由</li>
</ul>
</li>
<li>在配置 BGP 时，每个自治系统的管理员要选择至少一个路由器作为该自治系统的“<strong>BGP 发言人</strong>”</li>
<li>不同自治系统的 BGP 发言人要交换路由信息，首先必须建立 <strong>TCP 连接</strong>，端口号为 179
<ul>
<li>在此 TCP 连接上交换 BGP 报文以建立 <strong>BGP 会话</strong></li>
<li>利用 BGP 会话<strong>交换路由信息</strong>（例如，增加新的路由，或撤销过时的路由，以及报告出错的情况等）</li>
<li>使用 TCP 连接交换路由信息的两个 BGP 发言人，彼此称为对方的<strong>邻站</strong>或<strong>对等站</strong></li>
</ul>
</li>
<li>BGP 发言人除了运行 BGP 外，还必须运行自己所在自治系统所使用的内部网关协议 IGP，例如 OSPF 或 RIP。</li>
<li>BGP 发言人<strong>交换网络可达性的信息</strong>（要到达某个网络所要经过的一系列自治系统）</li>
<li>当 BGP 发言人互相交换了网络可达性的信息后，各 BGP 发言人就<strong>根据</strong>所采用的<strong>策略</strong>从收到的路由信息中<strong>找出到达各自治系统的较好的路由</strong>。也就是构造出树形结构、<strong>不存在回路的自治系统连通圈</strong>。</li>
<li>BGP 适用于多级结构的因特网</li>
<li>BGP-4 有以下四种报文
<ul>
<li><strong>OPEN（打开）报文</strong>：用来与相邻的另一个 BGP 发言人建立关系，使通信初始化。</li>
<li><strong>UPDATE（更新）报文</strong>：用来通告某一路由的信息，以及列出要撤销的多条路由。</li>
<li><strong>KEEPALIVE（保活）报文</strong>：用来周期性地证实邻站的连通性。</li>
<li><strong>NOTIFICATION（通知）报文</strong>：用来发送检测到的差错。</li>
</ul>
</li>
</ul>
<h2 id="4-7-ipv4-数据报的首部格式">4.7 IPv4 数据报的首部格式</h2>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240704180736636.png" alt="image-20240704180736636"></p>
<ul>
<li>
<p>版本：占 4 比特，表示 IP 协议的版本，通信双方使用的 IP 协议的版本必须一致，目前广泛使用的 IP 协议版本号为 4（即 IPv4）。</p>
</li>
<li>
<p>首部长度：占 4 比特，表示 IP 数据报首部的长度，该字段的取值以 4 字节为单位。</p>
<ul>
<li>最小十进制取值为 5，表示 IP 数据报首部只有 20 字节固定部分；</li>
<li>最大十进制取值为 15，表示 IP 数据报首部包含 20 字节固定部分和最大 40 字节可变部分。</li>
</ul>
</li>
<li>
<p>可选字段：长度从 1 个字节到 40 个字节不等，用来支持排错、测量及安全等措施。</p>
<ul>
<li>可选字段增加了 IP 数据报的功能，但这同时也使得 IP 数据报的首部长度称为可变的，这就增加了每一个路由器处理 IP 数据报的开销。实际上可选字段很少被使用。</li>
</ul>
</li>
<li>
<p>填充字段：确保首部长度为 4 字节的整数倍。使用全 0 进行填充。</p>
</li>
<li>
<p>区分服务：占 8 比特，用来获得更好的服务。1998 年，因特网工程任务组 IETF 把这个字段改名为区分服务。利用该字段的不同数值可提供不同等级的服务质量。只有在使用区分服务时，该字段才起作用。一般情况下都不使用该字段。</p>
</li>
<li>
<p>总长度：占 16 比特，表示 IP 数据报的总长度（首部 + 数据载荷）。最大取值为十进制的 65535，以字节为单位。</p>
</li>
<li>
<p>标识：占 16 比特，属于同一个数据报的各分片数据报应该具有相同的标识。IP 软件维持一个计数器，每产生一个数据报，计数器值加 1，并将此值赋给标识字段。</p>
</li>
<li>
<p>标志：占 3 比特，各比特含义如下：</p>
<table>
<thead>
<tr>
<th>位</th>
<th>1</th>
<th>0</th>
</tr>
</thead>
<tbody>
<tr>
<td>DF 位</td>
<td>不允许分片</td>
<td>允许分片</td>
</tr>
<tr>
<td>MF 位</td>
<td>后面还有分片</td>
<td>这是最后一个分片</td>
</tr>
<tr>
<td>保留位</td>
<td>必须为 0</td>
<td>必须为 0</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>片偏移：占 13 比特，指出分片数据报的数据载荷部分偏移其在源数据报的位置有多少个单位。片偏移以 8 个字节为单位。</p>
</li>
<li>
<p>生存时间 TTL：占 8 比特，表示 IP 数据报的生存时间。</p>
<ul>
<li>最初以秒位单位，最大生存周期为 255 秒；路由器转发 IP 数据报时，将 IP 数据报首部中的该字段的值减去 IP 数据报在路由器上耗费的时间，若不为 0 就转发，否则就丢弃。</li>
<li>现在以“跳数”为单位，路由器转发 IP 数据报时，将 IP 数据报首部中的该字段的值减 1，若不为 0 就转发，否则就丢弃。</li>
</ul>
</li>
<li>
<p>协议：占 8 比特，指明 IPv4 数据报的数据部分是何种协议数据单元。常用的一些协议和相应的协议字段值如下：</p>
<table>
<thead>
<tr>
<th>协议名称</th>
<th>ICMP</th>
<th>IGMP</th>
<th>TCP</th>
<th>UDP</th>
<th>IPv6</th>
<th>OSPF</th>
</tr>
</thead>
<tbody>
<tr>
<td>协议字段值</td>
<td>1</td>
<td>2</td>
<td>6</td>
<td>17</td>
<td>41</td>
<td>89</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>首部检验和：占 16 比特，用来检测首部在传输过程中是否出现差错。比 CRC 校验码简单，称为因特网检验和。</p>
<ul>
<li>由于 IP 层本身并不提供可靠传输的服务，并且计算首部检验和是一项耗时的操作，因此在 IPv6 中，路由器不再计算首部校验和，从而更快转发 IP 数据报。</li>
</ul>
</li>
<li>
<p>源 IP 地址和目的 IP 地址：各占 32 比特，用来填写发送该 IP 数据报的源主机的 IP 地址和接收该 IP 数据报的目的主机的 IP 地址。</p>
</li>
</ul>
<h2 id="4-8-网际控制报文协议-icmp">4.8 网际控制报文协议 ICMP</h2>
<ul>
<li>为了更有效地转发 IP 数据报和提高交付成功的机会，在网际层使用了网际控制报文协议 ICMP（<strong>I</strong>nternet <strong>C</strong>ontrol <strong>M</strong>essage <strong>P</strong>rotocol）。</li>
<li>主机或路由器使用 ICMP 来发送<strong>差错报告报文</strong>和<strong>询问报文</strong>。</li>
<li><strong>ICMP 报文被封装在 IP 数据报</strong>中发送。</li>
<li>ICMP 差错报告报文共有以下五种：
<ul>
<li>终点不可达</li>
<li>源点抑制</li>
<li>时间超过</li>
<li>参数问题</li>
<li>改变路由（重定向）</li>
</ul>
</li>
<li>以下情况<strong>不应发送 ICMP 差错报告报文</strong>：
<ul>
<li>对 ICMP 差错报告报文不再发送 ICMP 差错报告报文</li>
<li>对第一个分片的数据报片的所有后续数据报片都不发送 ICMP 差错报告报文</li>
<li>对具有多播地址的数据报都不发送 ICMP 差错报告报文</li>
<li>对具有特殊地址（如 127.0.0.0 或 0.0.0.0）的数据报不发送 ICMP 差错报告报文</li>
</ul>
</li>
<li>常用的 <strong>ICMP 询问报文</strong>有以下两种：
<ul>
<li>回送请求和回答</li>
<li>时间戳请求和回答</li>
</ul>
</li>
<li>ICMP 应用：
<ul>
<li>分组网间探测 PING</li>
<li>跟踪路由 traceroute</li>
</ul>
</li>
</ul>
<h2 id="4-9-虚拟专用网-vpn-与网络地址转换-nat">4.9 虚拟专用网 VPN 与网络地址转换 NAT</h2>
<ul>
<li>虚拟专用网 VPN（<strong>V</strong>irtual <strong>P</strong>rivate <strong>N</strong>etwork）
<ul>
<li><strong>利用公用的因特网作为本机构各专用网之间的通信载体</strong>，这样的专用网又称为虚拟专用网。</li>
<li>同一机构内不同部门的内部网络所构成的虚拟专用网 VPN 又称为<strong>内联网 VPN</strong>。</li>
<li>VPN 要保证传输数据的安全性，会将原始的<strong>内部数据报进行加密</strong>，然后再将其封装成为在因特网上发送到的外部数据报。</li>
<li>有时一个机构的 VPN 需要有某些外部机构（通常就是合作伙伴）参加进来，这样的 VPN 就称为<strong>外联网 VPN</strong>。</li>
<li>在外地工作的员工需要访问公司内部的专用网络时，只要在任何地点接入到因特网，运行驻留在员工 PC 中的 VPN 软件，在员工的 PC 和公司的主机之间建立 VPN 隧道，即可访问专用网络中的资源。这种 VPN 称为<strong>远程接入 VPN</strong>。</li>
</ul>
</li>
<li>网络地址转换 NAT（<strong>N</strong>etwork <strong>A</strong>ddress <strong>T</strong>ranslation）
<ul>
<li>由于 IP 地址的紧缺，一个机构能够申请到的 IP 地址数量往往远小于本机构所拥有的主机数量。因此，<strong>虚拟专用网中的各主机所分配的地址应该是本机构可自由分配的专用地址</strong>，而不是需要申请的、在因特网上使用的公有地址。</li>
<li>虽然因特网采用了无分类编址方式来缓解 IP 地址空间耗尽的速度，但由于因特网用户数目的激增，特别是大量小型办公室网络和家庭网络接入因特网的需求不断增加，IPv4 地址即将面临耗尽的危险仍然没有被解除。</li>
<li>1994 年提出了一种网络地址转换 <strong>NAT 的方法再次缓解了 IP 地址空间耗尽的问题</strong>。</li>
<li>NAT 能<strong>使大量使用内部专用地址的专用网络用户共享少量外部全球地址</strong>来访问因特网上的主机和资源。</li>
<li>由于绝大多数的网络应用都是使用运输层协议 TCP 或 UDP 来传送数据，因此可以<strong>利用运输层的端口号和 IP 地址一起进行转换</strong>。这样，用<strong>一个全球 IP 地址就可以使多个拥有本地地址的主机同时和因特网上的主机进行通信</strong>。这种将端口号和 IP 地址一起进行转换的技术叫做网络地址与端口号转换 NAPT（<strong>N</strong>etwork <strong>A</strong>ddress and <strong>P</strong>ort <strong>T</strong>ranslation）。</li>
<li>对于一些 P2P 网络应用，需要<strong>外网主机主动与内网主机进行通信，在通过 NAT 时会遇到问题</strong>，需要网络应用自己使用一些特殊的 NAT 穿越技术来解决问题。</li>
<li>由于 <strong>NAT 对外网屏蔽了内网主机的网络地址，能为内网的主机提供一定的安全保护</strong>。</li>
</ul>
</li>
</ul>
<h1 id="第五章-运输层">第五章 运输层</h1>
<h2 id="5-1-运输层概述">5.1 运输层概述</h2>
<ul>
<li>之前所介绍的计算机网络体系机构中的物理层、数据链路层以及网络层它们共同解决了将主机通过异构网络互联起来所面临的问题，<strong>实现了主机到主机的通信</strong>。</li>
<li>但实际上在计算机网络中进行<strong>通信的真正实体是位于通信两端主机中的进程</strong>。</li>
<li><strong>如何为运行在不同主机上的应用进程提供直接的通信服务是运输层的任务</strong>，运输层协议又称为端到端协议。</li>
<li>运输层向高层用户屏蔽了下面网络核心的细节（如网络拓扑、所采用的路由选择协议等），它使应用进程看见的就<strong>好像是在两个运输层实体之间有一条端到端的逻辑通信信道</strong>。</li>
<li>根据应用需求的不同，因特网的运输层为应用层提供了两种不同的运输协议，即<strong>面向连接的 TCP</strong> 和<strong>无连接的 UDP</strong>，这两种协议就是本章要讨论的主要内容。</li>
</ul>
<h2 id="5-2-运输层端口号-复用与分用的概念">5.2 运输层端口号、复用与分用的概念</h2>
<ul>
<li>
<p>为了使运行不同操作系统的计算机的应用进程之间能够进行网络通信，就必须<strong>使用同一的方法对 TCP/IP 体系的应用进程进行标识</strong>。</p>
</li>
<li>
<p>TCP/IP 体系的运输层使用端口号来区分应用层的不同应用进程。</p>
<ul>
<li>端口号使用 16 比特表示，取值范围 0~65535；
<ul>
<li>熟知端口号：0~1023，IANA 把这些端口号指派给了 TCP/IP 体系中最重要的一些应用协议，例如：FTP 使用 21/20，HTTP 使用 80，DNS 使用 53.</li>
<li>登记端口号：1024~49151，为没有熟知端口号的应用程序使用。使用这类端口号必须在 IANA 按照规定的手续登记，以防止重复。例如：Microsoft RDP 微软远程桌面使用的端口是 3389.</li>
<li>短暂端口号：49152~65535，留给客户进程选择暂时使用。当服务器进程收到客户进程的报文时，就知道了客户进程所使用的动态端口号。通信结束后，这个端口号可供其他客户进程以后使用。</li>
</ul>
</li>
<li><strong>端口号只具有本地意义</strong>，即端口号只是为了<strong>标识本计算机应用层中的各进程</strong>，在因特网中，<strong>不同计算机中的相同端口号是没有联系的</strong>。</li>
</ul>
</li>
<li>
<p>发送方的复用和接收方的分用</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240704201734832.png" alt="image-20240704201734832"></p>
</li>
<li>
<p>TCP/IP 体系的应用层常用协议所使用的运输层熟知端口号</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240704201920435.png" alt="image-20240704201920435"></p>
</li>
</ul>
<h2 id="5-3-udp-和-tcp-的对比">5.3 UDP 和 TCP 的对比</h2>
<table>
<thead>
<tr>
<th>用户数据报协议 UDP（User Datagram Protocol）</th>
<th>传输控制协议 TCP（<strong>T</strong>ransmission Control Protocol）</th>
</tr>
</thead>
<tbody>
<tr>
<td>无连接</td>
<td>面向连接</td>
</tr>
<tr>
<td>支持一对一，一对多，多对一和多对多交互通信。</td>
<td>每一条 TCP 连接只能有两个端点 EP，只能是一对一通信。</td>
</tr>
<tr>
<td>对应用层交付的报文直接打包</td>
<td>面向字节流</td>
</tr>
<tr>
<td>尽最大努力交付，也就是不可靠；不使用流量控制和拥塞控制</td>
<td>可靠传输，使用流量控制和拥塞控制</td>
</tr>
<tr>
<td>首部开销小，仅 8 字节</td>
<td>首部最小 20 字节，最大 60 字节</td>
</tr>
</tbody>
</table>
<h2 id="5-4-tcp-的流量控制">5.4 TCP 的流量控制</h2>
<ul>
<li>一般而言，我们总是希望数据传输得更快一些。
<ul>
<li>但如果发送方把数据发送得过快，接收方就可能来不及接收，这就会造成数据的丢失。</li>
</ul>
</li>
<li>所谓流量控制就是<strong>让发送方的发送速率不要太快，要让接收方来得及接收</strong>。</li>
<li>利用<strong>滑动窗口</strong>机制可以很方便地在 TCP 连接上实现对发送方的流量控制。
<ul>
<li>TCP 接收方利用自己的<strong>接收窗口</strong>的大小来限制发送方<strong>发送窗口</strong>的大小。</li>
<li>TCP 发送方收到接收方的<strong>零窗口通知</strong>后，应启动<strong>持续计时器</strong>。持续计时器超时后，向超时方发送<strong>零窗口探测报文</strong>。</li>
</ul>
</li>
</ul>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240704205738986.png" alt="image-20240704205738986"></p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240704210001200.png" alt="image-20240704210001200"></p>
<h2 id="5-5-tcp-的拥塞控制">5.5 TCP 的拥塞控制</h2>
<ul>
<li>在某段时间，若<strong>对网络中某一资源的需求超过了该资源所能提供的可用部分</strong>，<strong>网络性能就要变坏</strong>。这种情况就叫做<strong>拥塞</strong>。
<ul>
<li>在计算机网络中的链路容量（带宽）、交换结点中的缓存和处理机等，都是网络的资源。</li>
</ul>
</li>
<li>若<strong>出现拥塞而不进行控制</strong>，整个网络的<strong>吞吐量将随输入负荷的增大而下降</strong>。</li>
</ul>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240704212831364.png" alt="image-20240704212831364"></p>
<table>
<thead>
<tr>
<th>慢开始（skow-start）</th>
<th>拥塞避免（congestion avoidance）</th>
<th>快重传（fast retransmit）</th>
<th>快恢复（fast recovery）</th>
</tr>
</thead>
<tbody></tbody>
</table>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240704212500116.png" alt="image-20240704212500116"></p>
<h2 id="5-6-tcp-超时重传时间的选择">5.6 TCP 超时重传时间的选择</h2>
<ul>
<li>
<p>超时重传时间的选择是 TCP 最复杂的问题之一。</p>
</li>
<li>
<p>RFC6298 建议使用下式计算超时重传时间 RTO：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><mi>O</mi><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>+</mo><mn>4</mn><mo>×</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">RTO=RTT_S+4\times RTT_D
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>
<p>加权平均往返时间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">RTT_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mrow><mi>S</mi><mn>1</mn></mrow></msub><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mn>1</mn></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>新的</mtext><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>α</mi><mo stretchy="false">)</mo><mo>×</mo><mtext>旧的</mtext><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>+</mo><mi>α</mi><mo>×</mo><mtext>新的</mtext><mi>R</mi><mi>T</mi><mi>T</mi><mtext>样本</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mn>0</mn><mo>≤</mo><mi>α</mi><mo>&lt;</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
&amp;RTT_{S1}=RTT_1\\
&amp;新的RTT_S=(1-\alpha)\times 旧的RTT_S+\alpha\times 新的RTT样本\\
&amp;0\leq\alpha&lt;1
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.500000000000002em;vertical-align:-2.000000000000001em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.5em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.4999999999999991em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">新</span><span class="mord cjk_fallback">的</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord cjk_fallback">旧</span><span class="mord cjk_fallback">的</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord cjk_fallback">新</span><span class="mord cjk_fallback">的</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord cjk_fallback">样</span><span class="mord cjk_fallback">本</span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>已成为建议标准的 RFC6298 推荐的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.0037em;">α</span></span></span></span> 值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>8</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，即 0.125.</li>
</ul>
</li>
<li>
<p>RTT 偏差的加权平均 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">RTT_D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mrow><mi>D</mi><mn>1</mn></mrow></msub><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mn>1</mn></msub><mo>÷</mo><mn>2</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>新的</mtext><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>D</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy="false">)</mo><mo>×</mo><mtext>旧的</mtext><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>D</mi></msub><mo>+</mo><mi>β</mi><mo>×</mo><mi mathvariant="normal">∣</mi><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>−</mo><mtext>新的</mtext><mi>R</mi><mi>T</mi><mi>T</mi><mtext>样本</mtext><mi mathvariant="normal">∣</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mn>0</mn><mo>≤</mo><mi>β</mi><mo>&lt;</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
&amp;RTT_{D1}=RTT_1\div2\\
&amp;新的RTT_D=(1-\beta)\times旧的RTT_D+\beta\times|RTT_S-新的RTT样本|\\
&amp;0\leq\beta&lt;1
\end{aligned}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.500000000000002em;vertical-align:-2.000000000000001em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.5em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-3em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:-1.4999999999999991em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5000000000000004em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">2</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">新</span><span class="mord cjk_fallback">的</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord cjk_fallback">旧</span><span class="mord cjk_fallback">的</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord cjk_fallback">新</span><span class="mord cjk_fallback">的</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord mathdefault" style="margin-right:0.13889em;">T</span><span class="mord cjk_fallback">样</span><span class="mord cjk_fallback">本</span><span class="mord">∣</span></span></span><span style="top:-1.6599999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.000000000000001em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<ul>
<li>已成为建议标准的 RFC6298 推荐的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05278em;">β</span></span></span></span> 值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>4</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">4</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，即 0.25.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-7-tcp-可靠传输的实现">5.7 TCP 可靠传输的实现</h2>
<ul>
<li>TCP 基于<strong>以字节为单位的滑动窗口</strong>来实现可靠传输。
<ul>
<li>发送方在未收到接收方的确认时，可将发送窗口内还未发送的数据全部发送出去。</li>
<li>接收方只接受序号落入发送窗口内的数据。</li>
</ul>
</li>
<li>虽然发送方的发送窗口是根据接收方的接收窗口设置的，但在同一时刻，<strong>发送方的发送窗口并不总是和接收方的接收窗口</strong>一样大。
<ul>
<li>网络传送窗口值需要经历一定的时间滞后，并且这个时间还是不确定的。</li>
<li>发送方还可能根据网络当时的拥塞情况适当减小自己的发送窗口尺寸。</li>
</ul>
</li>
<li>对于<strong>不按序到达的数据应如何处理</strong>，TCP 并无明确规定。
<ul>
<li>如果接收方把不按序到达的数据一律丢弃，那么接收窗口的管理将会比较简单，但这样做对网络资源的利用不利，因为发送方会重复传送较多的数据。</li>
<li>TCP 通常对不按序到达的数据是先临时存放在接收窗口中，等到字节流中所缺少的字节收到后，再<strong>按序交付上层的应用进程</strong>。</li>
</ul>
</li>
<li>TCP 要求接收方必须有<strong>累计确认和稍待确认机制</strong>，这样可以减少传输开销。接收方可以在合适的时候发送确认，也可以在自己有数据要发送时把确认信息顺便捎带上。
<ul>
<li><strong>接收方不应过分推迟发送确认</strong>，否则会导致发送方不必要的超时重传，这反而浪费了网络的资源。TCP 标准规定，确认推迟的时间不应超过 0.5 秒。若收到一连串具有最大长度的报文段，则必须每隔一个报文段就发送一个确认 [RFC 1122]。</li>
<li>稍待确认实际上并不经常发生，因为大多数应用程序很少同时在两个方向上发送数据。</li>
</ul>
</li>
<li><strong>TCP 的通信是全双工通信</strong>。通信中的每一方都在发送和接收报文段。因此，每一方都有自己的发送窗口和接收窗口。在谈到这些窗口时，一定要弄清楚是哪一方的窗口。</li>
</ul>
<h2 id="5-8-tcp-的运输连接管理">5.8 TCP 的运输连接管理</h2>
<h3 id="一-tcp-的连接建立">一、TCP 的连接建立</h3>
<ul>
<li>
<p>TCP 的连接建立要解决以下三个问题：</p>
<ol>
<li>使 TCP 双方能够确知对方的存在；</li>
<li>使 TCP 双方能够协商一些参数（如最大窗口值、是否使用窗口扩大选项和时间戳选项以及服务质量等）；</li>
<li>使 TCP 双方能够对运输实体资源（如缓存大小、连接表中的项目等）进行分配。</li>
</ol>
</li>
<li>
<p>TCP 使用“三报文握手”建立连接</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240706111001359.png" alt="image-20240706111001359"></p>
<ul>
<li>注意：
<ol>
<li>TCP 的标准规定，SYN = 1 的报文段不能携带数据，但要消耗掉一个序号；</li>
<li>TCP 的标准规定，普通的确认报文段如果不携带数据，则不消耗序号。</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="二-tcp-的连接释放">二、TCP 的连接释放</h3>
<ul>
<li>
<p>TCP 通过“四报文挥手”来释放连接</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240706123821664.png" alt="image-20240706123821664"></p>
</li>
</ul>
<h2 id="5-9-tcp-报文段的首部格式">5.9 TCP 报文段的首部格式</h2>
<ul>
<li>为了实现可靠传输，TCP 采用了<strong>面向字节流</strong>的方式。</li>
<li>但 TCP 在发送数据时，是从发送缓存取出一部分或全部字节并给其添加一个首部使之称为 <strong>TCP 报文段</strong>后进行发送。
<ul>
<li>一个 TCP 报文段由<strong>首部</strong>和<strong>数据载荷</strong>两部分构成。</li>
<li>TCP 的全部功能都能体现在它首部中各字段的作用。</li>
</ul>
</li>
</ul>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240706130351386.png" alt="image-20240706130351386"></p>
<ul>
<li>
<p>源端口：占 16 比特，写入源端口号，用来<strong>标识发送该 TCP 报文段的应用进程</strong>。</p>
</li>
<li>
<p>目的端口：占 16 比特，写入目的端口号，用来<strong>标识接收该 TCP 报文段的应用进程</strong>。</p>
</li>
<li>
<p>序号：占 32 比特，取值范围 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mn>32</mn></msup><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,2^{32} - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>​，序号增加到最后一个后，下一个序号就又回到 0。<strong>指出本 TCP 报文段数据载荷的第一个字节的序号</strong>。</p>
</li>
<li>
<p>确认号：占 32 比特，取值范围 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><msup><mn>2</mn><mn>32</mn></msup><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0,2^{32}-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span>​，确认号增加到最后一个后，下一个确认号就又回到 0。<strong>指出期望收到对方下一个 TCP 报文段的数据载荷的第一个字节的序号，同时也是对之前收到的所有数据的确认</strong>。（若确认号 = n，则表明到序号 n - 1 为止的所有数据都已正确接收，期望接收序号为 n 的数据）</p>
</li>
<li>
<p>确认标志位 ACK：取值为 1 时确认号字段才有效；取值为 0 时确认号字段无效。（TCP 规定，在连接建立后所有传送的 TCP 报文段都必须把 ACK 置 1）</p>
</li>
<li>
<p>数据偏移：占 4 比特，并以 4 字节为单位。<strong>用来指出 TCP 报文段的数据载荷部分的起始处距离 TCP 报文段的起始处有多远</strong>。这个字段实际上是指出了 TCP 报文段的首部长度。</p>
<ul>
<li>首部固定长度为 20 字节，因此数据偏移字段的最小值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0101</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">(0101)_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mord">1</span><span class="mord">0</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>；</li>
<li>首部最大长度为 60 字节，因此数据偏移字段的最大值为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1111</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">(1111)_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</li>
</ul>
</li>
<li>
<p>保留：占 6 比特，保留为今后使用，但目前应置为 0.</p>
</li>
<li>
<p>窗口：占 16 比特，以字节为单位。<strong>指出发送本报文段的一方的接收窗口</strong>。</p>
<ul>
<li>窗口值作为接收方让发送方设置其发送窗口的依据。这是以接收方的接受能力来控制发送方的发送能力，称为流量控制。</li>
</ul>
</li>
<li>
<p>校验和：占 16 比特，检查范围包括 TCP 报文段的首部和数据载荷两部分。在计算校验和时，要在 TCP 报文段的前面加上 12 字节的伪首部。</p>
</li>
<li>
<p>同步标志位 SYN：在 TCP 连接建立时用来同步序号。</p>
</li>
<li>
<p>终止标志位 FIN：用来释放 TCP 连接。</p>
</li>
<li>
<p>复位标志位 RST：用来复位 TCP 连接。</p>
<ul>
<li>当 RST = 1 时，表明 TCP 连接出现了异常，必须释放连接，然后再重新建立连接。</li>
<li>RST 置 1 还用来拒绝一个非法的报文段或拒绝打开一个 TCP 连接。</li>
</ul>
</li>
<li>
<p>推送标志位 PSH：接收方的 TCP 收到该标志位为 1 的报文段会<strong>尽快上交应用进程</strong>，而不必等到接收缓存都填满后再向上交付。</p>
</li>
<li>
<p>紧急标志位 URG：取值为 1 时紧急指针字段有效；取值为 0 时紧急指针字段无效。</p>
</li>
<li>
<p>紧急指针：占 16 比特，以字节为单位，用来指明紧急数据的长度。</p>
<ul>
<li>当发送方有紧急数据时，可将紧急数据插队到发送缓存的最前面，并立刻封装到一个 TCP 报文段中进行发送。紧急指针会指出本报文段数据载荷部分包含了多长的紧急数据，紧急数据之后是普通数据。</li>
</ul>
</li>
<li>
<p>选项：</p>
<ul>
<li>最大报文段长度 MSS 选项：TCP 报文段数据载荷部分的最大长度。</li>
<li>窗口扩大选项：为了扩大窗口（提高吞吐率）。</li>
<li>时间戳选项：
<ul>
<li>用来计算往返时间 RTT；</li>
<li>用于处理序号超范围的情况，又称为防止序号绕回 PAWS。</li>
</ul>
</li>
<li>选择确认选项：用来实现选择确认功能。</li>
</ul>
</li>
<li>
<p>填充：由于选项的长度可变，因此使用填充来<strong>确保报文段首部能被 4 整除</strong>（因为数据偏移字段，也就是首部长度字段，是以 4 字节为单位的）。</p>
</li>
</ul>
<h1 id="第六章-应用层">第六章 应用层</h1>
<h2 id="6-1-应用层概述">6.1 应用层概述</h2>
<ul>
<li>应用层是计算机体系结构的<strong>最顶层</strong>，是<strong>设计和建立计算机网络的最终目的</strong>，也是计算机网络中发展最快的部分。
<ul>
<li>早期基于文本的应用（电子邮件、远程登陆、文件传输、新闻组）</li>
<li>20 世纪 90 年代将因特网带入千家万户的万维网 WWW</li>
<li>当今流行的即时通信、P2P 文件共享及各种音视频应用</li>
<li>计算设备的小型化和“无处不在”，宽带住宅接入和无线接入的日益普及和迅速发展，为未来更多的新型应用提供了广阔的舞台。</li>
</ul>
</li>
<li>在本章中，我们以一些经典的网络应用为例来学习有关网络应用的原理、协议和实现方面的知识。
<ul>
<li>万维网 WWW</li>
<li>域名系统 DNS</li>
<li>动态主机配置协议 DHCP</li>
<li>电子邮件</li>
<li>文件传送协议 FTP</li>
<li>P2P 文件共享</li>
<li>多媒体网络应用</li>
</ul>
</li>
</ul>
<h2 id="6-2-客户-服务器方式-c-s-方式-和对等方式-p2p-方式">6.2 客户/服务器方式（C/S 方式）和对等方式（P2P 方式）</h2>
<ul>
<li>客户/服务器（<strong>C</strong>lient/<strong>S</strong>erver）方式
<ul>
<li>客户/服务器是指通信中所涉及的两个应用进程。</li>
<li>客户/服务器方式所描述的是进程之间服务和被服务的关系。</li>
<li><strong>客户是服务请求方，服务器是服务提供方</strong>。</li>
<li><strong>服务器总是处于运行状态，并等待客户的服务请求</strong>。服务器具有固定端口号（例如 HTTP 服务器的默认端口号为 80），而运行服务器的主机也具有固定的 IP 地址。</li>
<li>C/S 方式是因特网上传统的、同时也是最成熟的方式，很多我们熟悉的网络应用采用的都是 C/S 方式。包括万维网 WWW、电子邮件、文件传输 FTP 等。</li>
<li>基于 C/S 方式的应用服务通常是<strong>服务集中型</strong>的，即应用服务集中在网络中比客户计算机少得多的服务器计算机上。
<ul>
<li>由于一台服务器计算机要为多个客户提供服务，在 C/S 应用中，<strong>常会出现服务器计算机跟不上众多客户机请求的情况</strong>。</li>
<li>为此，在 C/S 应用中，常用<strong>计算机群集</strong>（或服务器场）构建一个强大的<strong>虚拟服务器</strong>。</li>
</ul>
</li>
</ul>
</li>
<li>对等（<strong>P</strong>eer-<strong>to</strong>-<strong>P</strong>eer）方式
<ul>
<li>在 P2P 方式中，<strong>没有固定的服务请求者和服务提供者</strong>，分布在网络边缘各端系统中的应用进程是对等的，被称为对等方。对等方相互之间直接通信，每个对等方既是服务的请求者，又是服务的提供者。</li>
<li>目前，在因特网上流行的 P2P 应用主要包括 P2P 文件共享、即时通信、P2P 流媒体、分布式存储等。</li>
<li>基于 P2P 的应用是<strong>服务分散型</strong>的，因为服务不是集中在少数几个服务器计算机中，而是分散在大量对等计算机中，这些计算机并不为服务提供商所有，而是为个人控制的桌面计算机和笔记本电脑，它们通常位于住宅、校园和办公室中。</li>
<li>P2P 方式的最突出特性之一就是它的<strong>可扩展性</strong>。因为系统每增加一个对等方，不仅增加的是服务的请求者，同时也增加了服务的提供者，<strong>系统性能不会因规模的增大而降低</strong>。</li>
<li>P2P 方式<strong>具有成本上的优势</strong>，因为它通常不需要庞大的服务器设施和服务器带宽。为了降低成本，服务提供商对于将 P2P 方式用于应用的兴趣越来越大。</li>
</ul>
</li>
</ul>
<h2 id="6-3-动态主机配置协议-dhcp">6.3 动态主机配置协议 DHCP</h2>
<ul>
<li>
<p>动态主机配置协议 DHCP（<strong>D</strong>ynamic <strong>H</strong>ost <strong>C</strong>onfiguration <strong>P</strong>rotocol）提供了一种机制，称为即插即用连网。这种机制<strong>允许一台计算机加入新网络时可自动获取 IP 地址等网络配置信息而不用手工参与</strong>。</p>
</li>
<li>
<p>DHCP 主要使用以下报文来实现其功能：</p>
<ul>
<li>DHCP DISCOVER：DHCP 发现报文</li>
<li>DHCP OFFER：DHCP 提供报文</li>
<li>DHCP REQUEST：DHCP 请求报文</li>
<li>DHCP ACK：DHCP 确认报文</li>
<li>DHCP NACK：DHCP 否认报文</li>
<li>DHCP RELEASE：DHCP 释放报文</li>
</ul>
</li>
<li>
<p>DHCP 报文<strong>在运输层使用 UDP 协议封装</strong></p>
<ul>
<li>DHCP 客户使用的 UDP 端口号为 68；</li>
<li>DHCP 服务器使用的 UDP 端口号为 67.</li>
</ul>
</li>
<li>
<p>DHCP 客户在<strong>未获取到 IP 地址时使用地址 0.0.0.0</strong></p>
</li>
<li>
<p>DHCP 的工作过程</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240706145154057.png" alt="image-20240706145154057"></p>
</li>
<li>
<p>在每一个网络上都设置一个 DHCP 服务器会使 DHCP 服务器的数量太多。因此现在是使每一个网络至少有一个 <strong>DHCP 中继代理（通常是一台路由器）</strong>，它配置了 DHCP 服务器的 IP 地址信息，作为各网络中计算机与 DHCP 服务器的桥梁。</p>
</li>
</ul>
<h2 id="6-4-域名系统-dns">6.4 域名系统 DNS</h2>
<ul>
<li>域名系统 DNS（<strong>D</strong>omain <strong>N</strong>ame <strong>S</strong>ystem）是因特网使用的命名系统，用来把方便人们记忆的具有特定含义的主机名转换为便于机器处理的 IP 地址。</li>
<li>因特网采用<strong>层次树状结构的域名结构</strong>
<ul>
<li>… .三级域名.二级域名.顶级域名</li>
</ul>
</li>
<li>顶级域名 TLD 分为以下三类：
<ul>
<li>国家顶级域名 nTLD</li>
<li>通用顶级域名 gTLD</li>
<li>反向域名 arpa</li>
</ul>
</li>
<li>域名和 IP 地址的映射关系必须保存在域名服务器中，弓所有其他应用查询。显然不能将所有信息都存储在一台域名服务器中。DNS 使用<strong>分布在各地的域名服务器</strong>来实现域名到 IP 地址的转换。</li>
<li>域名服务器可以划分为以下四种不同的类型：
<ul>
<li>根域名服务器</li>
<li>顶级域名服务器</li>
<li>权限域名服务器</li>
<li>本地域名服务器</li>
</ul>
</li>
<li>域名解析的过程使用两种域名查询方式：
<ul>
<li>递归查询</li>
<li>迭代查询</li>
</ul>
</li>
<li>由于递归查询对于被查询的域名服务器负担太大，通常采用以下模式：从请求主机到本地域名服务器的查询是递归查询，而其余的查询是迭代查询。</li>
<li>为了提高 DNS 的查询效率，并减轻根域名服务器的负荷和减少因特网上的 DNS 查询报文数量，在域名服务器和主机中广泛地使用了<strong>高速缓存</strong>。</li>
<li>DNS 报文使用运输层的 UDP 协议进行封装，运输层<strong>端口号为 53</strong></li>
</ul>
<h2 id="6-5-文件传送协议-ftp">6.5 文件传送协议 FTP</h2>
<ul>
<li>
<p>将某台计算机中的文件通过网络传送到可能相距很远的另一台计算机中，是一项基本的网络应用，即文件传送。</p>
</li>
<li>
<p><strong>文件传送协议 FTP</strong> 是因特网上使用得最广泛的文件传送协议。</p>
<ul>
<li>FTP <strong>提供交互式的访问</strong>，允许客户<strong>指明文件的类型与格式</strong>（如指明是否使用 ASCII 码），并允许<strong>文件具有存取权限</strong>（如访问文件的用户必须经过授权，并输入有效的口令）。</li>
<li><strong>FTP 屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件</strong>。</li>
</ul>
</li>
<li>
<p>FTP 客户和服务器之间要<strong>建立以下两个并行的 TCP 连接</strong>：</p>
<ul>
<li><strong>控制连接</strong>：在整个会话期间一直保持打开，用于传送 FTP 相关控制命令；</li>
<li><strong>数据连接</strong>：用于文件传输，在每次文件传输时才建立，传输结束就关闭。</li>
</ul>
</li>
<li>
<p>FTP 的基本工作原理</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240706155403476.png" alt="image-20240706155403476"></p>
</li>
<li>
<p><strong>默认情况下，FTP 使用 TCP 21 端口进行控制连接，TCP 20 端口进行数据连接</strong>。但是，是否使用 TCP 20 端口建立数据连接与传输模式有关，<strong>主动方式使用 TCP 20 端口</strong>，<strong>被动方式由服务器和客户端自行协商决定</strong>。</p>
</li>
</ul>
<h2 id="6-6-电子邮件">6.6 电子邮件</h2>
<ul>
<li>电子邮件系统采用<strong>客户/服务器方式</strong>。三个主要组成构件：<strong>用户代理</strong>，<strong>邮件服务器</strong>以及电子邮件所需的<strong>协议</strong>。
<ul>
<li><strong>用户代理</strong>是用户与电子邮件系统的接口，又称为<strong>电子邮件客户端软件</strong>。</li>
<li><strong>邮件服务器</strong>是电子邮件系统的基础设施。因特网上所有的 ISP 都有邮件服务器，其功能是<strong>发送和接收邮件</strong>，同时还要负责维护用户的邮箱。</li>
<li><strong>协议</strong>包括邮件<strong>发送协议</strong>（例如 SMTP）和邮件<strong>读取协议</strong>（例如 POP3）。</li>
</ul>
</li>
<li>常用的邮件发送协议是简单邮件传送协议 SMTP。
<ul>
<li>基于 TCP 连接，端口号为 25；</li>
<li>只能传送 ASCII 码文本；</li>
<li>用于用户代理向邮件服务器以及邮件服务器之间的邮件发送。</li>
</ul>
</li>
<li>为解决 SMTP 传送非 ASCII 码文本的问题，提出了<strong>多用途因特网邮件扩展 MIME</strong>。</li>
<li>常用的<strong>邮件读取协议</strong>有以下两个：
<ul>
<li><strong>邮局协议 POP3</strong>：非常简单、功能有限的邮件读取协议。用户只能以下载并删除方式或下载并保留方式从邮件服务器下载邮件到用户方计算机。<strong>不允许用户在邮件管理器上管理自己的邮件</strong>。</li>
<li><strong>因特网邮件访问协议 IMAP</strong>：功能比 POP3 强大的邮件读取协议。<strong>用户在自己的计算机上就可以操控邮件服务器中的邮箱</strong>，就像在本地操控一样，因此 IMAP 是一个联机协议。</li>
</ul>
</li>
<li>POP3 和 IMAP4 都采用<strong>基于 TCP 连接的客户/服务器方式</strong>。POP3 使用端口 110，IMAP 使用端口 143。</li>
<li>基于万维网的电子邮件
<ul>
<li>通过<strong>浏览器</strong>登录（提供用户名和口令）<strong>邮件服务器万维网网站</strong>就可以撰写、收发、阅读和管理电子邮件。这种工作模式与 IMAP 很类似，不同的是用户计算机无需安装专门的用户代理程序，只需要使用通用的万维网浏览器。</li>
<li>这种工作模式在<strong>用户浏览器与邮件服务器网站之间使用 HTTP 协议</strong>，而<strong>邮件服务器之间使用 SMTP 协议</strong>。</li>
</ul>
</li>
</ul>
<h2 id="6-6-万维网-www">6.6 万维网 WWW</h2>
<ul>
<li>
<p>万维网 WWW（<strong>W</strong>orld <strong>W</strong>ide <strong>W</strong>eb）是一个大规模的、联机式的信息储藏所，是运行在因特网上的一个<strong>分布式应用</strong>。</p>
</li>
<li>
<p>浏览器最重要的部分是<strong>渲染引擎</strong>，也就是<strong>浏览器内核</strong>，负责对网页内容进行解析和显示。</p>
</li>
<li>
<p>万维网使用<strong>统一资源定位符 URL</strong> 来指明因特网上任何种类“资源”的位置。其一般形式为：&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</p>
</li>
<li>
<p>万维网文档</p>
<ul>
<li>超文本标记语言 HTML：使用多种“标签”来描述网页的结构和内容。（网页扩展名为 .html）</li>
<li>层叠样式表CSS：从审美角度来描述网页的样式。（文件扩展名为 .css）</li>
<li>脚本语言 JavaScript：控制网页的行为。（文件扩展名为 .js）</li>
</ul>
</li>
<li>
<p><strong>超文本传输协议 HTTP</strong>（<strong>H</strong>yper<strong>T</strong>ext <strong>T</strong>ransfer <strong>P</strong>rotocol）定义类浏览器（即万维网客户进程）怎样向万维网服务器请求万维网文档，以及万维网服务器怎样把万维网文档传送给浏览器。</p>
<ul>
<li>HTTP/1.0 采用<strong>非持续连接</strong>方式。每次浏览器要请求一个文件都要与服务器建立 TCP 连接（80 端口），当收到相应后就立即关闭连接。</li>
<li>HTTP/1.1 采用<strong>持续连接</strong>方式。万维网服务器在发送相应后仍然保持这条连接，使同一个客户（浏览器）和该服务器就可以继续在这条连接上传送后续的 HTTP 请求报文和响应报文。为了进一步提高效率，还可采用<strong>流水线</strong>方式，即浏览器在收到 HTTP 的响应报文之前就能够连续发送多个请求报文。</li>
</ul>
</li>
<li>
<p>HTTP 有两类报文：<strong>请求报文</strong>和<strong>相应报文</strong>。报文中的每一个字段都是一些 ASCII 码串，并且每个字段的长度都是不确定的。</p>
<p><img src="/../images/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0/image-20240706210400611.png" alt="image-20240706210400611"></p>
</li>
<li>
<p>Cookie 提供了一种机制使得万维网服务器能够“记住”用户，而无需用户主动提供用户标识信息。也就是说，<strong>Cookie 是一种对无状态的 HTTP 进行状态化的技术</strong>。</p>
</li>
<li>
<p>在万维网中还可以使用缓存机制以提高万维网的效率。万维网缓存又称为 <strong>Web 缓存</strong>，可位于客户机，也可位于中间系统上，位于中间系统上的 Web 缓存又称为<strong>代理服务器</strong>。</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://RainyDoor.github.io">RainyDoor</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://rainydoor.github.io/655c1d54.html">https://rainydoor.github.io/655c1d54.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://RainyDoor.github.io" target="_blank">RainyDoor</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></div><div class="post_share"><div class="social-share" data-image="/img/109310857_p0.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/be9d25e7.html" title="Java中的接口interface"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java中的接口interface</div></div></a></div><div class="next-post pull-right"><a href="/cb3cde6a.html" title="Java String 相关类的底层原理"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java String 相关类的底层原理</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/109310857_p0.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">RainyDoor</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">42</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">40</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/RainyDoor" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:3391182076@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E8%BF%B0"><span class="toc-text">第一章 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A6%82%E8%BF%B0"><span class="toc-text">1.1 因特网概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-text">1.2 三种交换方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-text">一、电路交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-text">二、分组交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2"><span class="toc-text">三、报文交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E6%80%BB%E7%BB%93"><span class="toc-text">四、总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-text">1.3 计算机网络的性能指标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-text">1.4 计算机网络体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E5%B8%B8%E8%A7%81%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-text">一、常见的计算机网络体系结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%88%86%E5%B1%82%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7"><span class="toc-text">二、计算机网络体系结构分层的必要性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E4%B8%93%E7%94%A8%E6%9C%AF%E8%AF%AD"><span class="toc-text">三、专用术语</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-text">第二章 物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E7%89%A9%E7%90%86%E5%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">2.1 物理层的基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-text">一、传输媒体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E7%89%A9%E7%90%86%E5%B1%82%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%B8%BB%E8%A6%81%E4%BB%BB%E5%8A%A1"><span class="toc-text">二、物理层协议的主要任务</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-text">2.2 物理层下面的传输媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-text">一、导引型传输媒体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E9%9D%9E%E5%AF%BC%E5%BC%95%E5%9E%8B%E4%BC%A0%E8%BE%93%E5%AA%92%E4%BD%93"><span class="toc-text">二、非导引型传输媒体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F"><span class="toc-text">2.3 传输方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E4%B8%B2%E8%A1%8C%E4%BC%A0%E8%BE%93%E5%92%8C%E5%B9%B6%E8%A1%8C%E4%BC%A0%E8%BE%93"><span class="toc-text">一、串行传输和并行传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E5%90%8C%E6%AD%A5%E4%BC%A0%E8%BE%93%E5%92%8C%E5%BC%82%E6%AD%A5%E4%BC%A0%E8%BE%93"><span class="toc-text">二、同步传输和异步传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E4%BF%A1%E9%81%93%E5%8F%8A%E4%B8%89%E7%A7%8D%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="toc-text">三、信道及三种通信方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6"><span class="toc-text">2.4 编码与调制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86"><span class="toc-text">一、数据通信的基本知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E8%B0%83%E5%88%B6"><span class="toc-text">二、调制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E4%BF%A1%E9%81%93%E7%9A%84%E6%9E%81%E9%99%90%E5%AE%B9%E9%87%8F"><span class="toc-text">2.5 信道的极限容量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E7%A0%81%E9%97%B4%E4%B8%B2%E6%89%B0"><span class="toc-text">一、码间串扰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E9%99%90%E5%88%B6%E7%A0%81%E5%85%83%E5%9C%A8%E4%BF%A1%E9%81%93%E4%B8%8A%E7%9A%84%E4%BC%A0%E8%BE%93%E9%80%9F%E7%8E%87%E7%9A%84%E5%9B%A0%E7%B4%A0"><span class="toc-text">二、限制码元在信道上的传输速率的因素</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF"><span class="toc-text">2.6 信道复用技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8-fdm"><span class="toc-text">一、频分复用 FDM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E6%B3%A2%E5%88%86%E5%A4%8D%E7%94%A8-wdm"><span class="toc-text">二、波分复用 WDM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8-tdm"><span class="toc-text">三、时分复用 TDM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E7%BB%9F%E8%AE%A1%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8-stdm"><span class="toc-text">四、统计时分复用 STDM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94-%E7%A0%81%E5%88%86%E5%A4%8D%E7%94%A8-cdm"><span class="toc-text">五、码分复用 CDM</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-text">第三章 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-text">3.1 数据链路层概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7"><span class="toc-text">3.2 封装成帧</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B"><span class="toc-text">3.3 差错检测</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="toc-text">3.4 可靠传输</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">一、可靠传输的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E5%81%9C%E6%AD%A2-%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE-sw"><span class="toc-text">二、停止-等待协议 SW</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E5%9B%9E%E9%80%80-n-%E5%B8%A7%E5%8D%8F%E8%AE%AE-gbn"><span class="toc-text">三、回退 N 帧协议 GBN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AE-sr"><span class="toc-text">四、选择重传协议 SR</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AE-ppp"><span class="toc-text">3.5 点对点协议 PPP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6-mac"><span class="toc-text">3.6 媒体接入控制 MAC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-text">一、媒体接入控制的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E9%9D%99%E6%80%81%E5%88%92%E5%88%86%E4%BF%A1%E9%81%93"><span class="toc-text">二、静态划分信道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5"><span class="toc-text">三、随机接入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-csma-cd-%E5%8D%8F%E8%AE%AE"><span class="toc-text">1. CSMA&#x2F;CD 协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-csma-ca-%E5%8D%8F%E8%AE%AE"><span class="toc-text">2. CSMA&#x2F;CA 协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-7-mac-%E5%9C%B0%E5%9D%80-ip-%E5%9C%B0%E5%9D%80%E4%BB%A5%E5%8F%8A-arp-%E5%8D%8F%E8%AE%AE"><span class="toc-text">3.7 MAC 地址、IP 地址以及 ARP 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-mac-%E5%9C%B0%E5%9D%80"><span class="toc-text">一、MAC 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-ip-%E5%9C%B0%E5%9D%80"><span class="toc-text">二、IP 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-arp-%E5%8D%8F%E8%AE%AE"><span class="toc-text">三、ARP 协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-8-%E9%9B%86%E7%BA%BF%E5%99%A8%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">3.8 集线器与交换机的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-9-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%87%AA%E5%AD%A6%E4%B9%A0%E5%92%8C%E8%BD%AC%E5%8F%91%E5%B8%A7%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="toc-text">3.9 以太网交换机自学习和转发帧的流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-10-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE-stp"><span class="toc-text">3.10 以太网交换机的生成树协议 STP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-11-%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91-vlan"><span class="toc-text">3.11 虚拟局域网 VLAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E6%A6%82%E8%BF%B0"><span class="toc-text">一、概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6"><span class="toc-text">二、实现机制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-text">第四章 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-text">4.1 网络层概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%9C%8D%E5%8A%A1"><span class="toc-text">4.2 网络层提供的两种服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-ipv4-%E5%9C%B0%E5%9D%80"><span class="toc-text">4.3 IPv4 地址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E6%A6%82%E8%BF%B0"><span class="toc-text">一、概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84-ipv4-%E5%9C%B0%E5%9D%80"><span class="toc-text">二、分类编址的 IPv4 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91%E7%9A%84-ipv4-%E5%9C%B0%E5%9D%80"><span class="toc-text">三、划分子网的 IPv4 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80%E7%9A%84-ipv4-%E5%9C%B0%E5%9D%80"><span class="toc-text">四、无分类编址的 IPv4 地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94-ipv4-%E5%9C%B0%E5%9D%80%E7%9A%84%E5%BA%94%E7%94%A8%E8%A7%84%E5%88%92"><span class="toc-text">五、IPv4 地址的应用规划</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-ip-%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E5%8F%91%E9%80%81%E5%92%8C%E8%BD%AC%E5%8F%91%E8%BF%87%E7%A8%8B"><span class="toc-text">4.4 IP 数据报的发送和转发过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-5-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE%E5%8F%8A%E5%85%B6%E5%8F%AF%E8%83%BD%E4%BA%A7%E7%94%9F%E7%9A%84%E8%B7%AF%E7%94%B1%E7%8E%AF%E8%B7%AF%E9%97%AE%E9%A2%98"><span class="toc-text">4.5 静态路由配置及其可能产生的路由环路问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-6-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-text">4.6 路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-%E6%A6%82%E8%BF%B0"><span class="toc-text">一、概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF%E5%8D%8F%E8%AE%AE-rip-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">二、路由信息协议 RIP 的基本工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89-%E5%BC%80%E6%94%BE%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88-ospf-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">三、开放最短路径优先 OSPF 的基本工作原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B-%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE-bgp-%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-text">四、边界网关协议 BGP 的基本工作原理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-7-ipv4-%E6%95%B0%E6%8D%AE%E6%8A%A5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-text">4.7 IPv4 数据报的首部格式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-8-%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE-icmp"><span class="toc-text">4.8 网际控制报文协议 ICMP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-9-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91-vpn-%E4%B8%8E%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-nat"><span class="toc-text">4.9 虚拟专用网 VPN 与网络地址转换 NAT</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E8%BF%90%E8%BE%93%E5%B1%82"><span class="toc-text">第五章 运输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E8%BF%90%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-text">5.1 运输层概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E8%BF%90%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3%E5%8F%B7-%E5%A4%8D%E7%94%A8%E4%B8%8E%E5%88%86%E7%94%A8%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-text">5.2 运输层端口号、复用与分用的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-udp-%E5%92%8C-tcp-%E7%9A%84%E5%AF%B9%E6%AF%94"><span class="toc-text">5.3 UDP 和 TCP 的对比</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-tcp-%E7%9A%84%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-text">5.4 TCP 的流量控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-tcp-%E7%9A%84%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-text">5.5 TCP 的拥塞控制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-tcp-%E8%B6%85%E6%97%B6%E9%87%8D%E4%BC%A0%E6%97%B6%E9%97%B4%E7%9A%84%E9%80%89%E6%8B%A9"><span class="toc-text">5.6 TCP 超时重传时间的选择</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7-tcp-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-text">5.7 TCP 可靠传输的实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-8-tcp-%E7%9A%84%E8%BF%90%E8%BE%93%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-text">5.8 TCP 的运输连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80-tcp-%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B"><span class="toc-text">一、TCP 的连接建立</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C-tcp-%E7%9A%84%E8%BF%9E%E6%8E%A5%E9%87%8A%E6%94%BE"><span class="toc-text">二、TCP 的连接释放</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-9-tcp-%E6%8A%A5%E6%96%87%E6%AE%B5%E7%9A%84%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F"><span class="toc-text">5.9 TCP 报文段的首部格式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-text">第六章 应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%BA%94%E7%94%A8%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-text">6.1 应用层概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%96%B9%E5%BC%8F-c-s-%E6%96%B9%E5%BC%8F-%E5%92%8C%E5%AF%B9%E7%AD%89%E6%96%B9%E5%BC%8F-p2p-%E6%96%B9%E5%BC%8F"><span class="toc-text">6.2 客户&#x2F;服务器方式（C&#x2F;S 方式）和对等方式（P2P 方式）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE-dhcp"><span class="toc-text">6.3 动态主机配置协议 DHCP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F-dns"><span class="toc-text">6.4 域名系统 DNS</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-%E6%96%87%E4%BB%B6%E4%BC%A0%E9%80%81%E5%8D%8F%E8%AE%AE-ftp"><span class="toc-text">6.5 文件传送协议 FTP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-text">6.6 电子邮件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-6-%E4%B8%87%E7%BB%B4%E7%BD%91-www"><span class="toc-text">6.6 万维网 WWW</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/3b2912fc.html" title="微服务保护">微服务保护</a><time datetime="2025-05-05T12:12:55.000Z" title="发表于 2025-05-05 20:12:55">2025-05-05</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/d7c50f3c.html" title="OpenFeign的使用">OpenFeign的使用</a><time datetime="2025-04-24T14:01:18.000Z" title="发表于 2025-04-24 22:01:18">2025-04-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/c1baee3f.html" title="初识JVM">初识JVM</a><time datetime="2025-04-22T09:11:18.000Z" title="发表于 2025-04-22 17:11:18">2025-04-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/e614237b.html" title="JVM内存结构">JVM内存结构</a><time datetime="2025-04-22T09:05:22.000Z" title="发表于 2025-04-22 17:05:22">2025-04-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/5294eb22.html" title="redis消息队列">redis消息队列</a><time datetime="2025-03-30T11:01:45.000Z" title="发表于 2025-03-30 19:01:45">2025-03-30</time></div></div></div></div></div></div></main><footer id="footer" style="background: lightgray"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By RainyDoor</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my blog!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="false"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>